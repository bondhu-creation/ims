"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[5877],{3040:(y,f,i)=>{i.d(f,{N4:()=>n,op:()=>g});var l=i(9417);function n(o){Object.values(o.controls).forEach(a=>{a.invalid&&(a.markAsDirty(),a.updateValueAndValidity({onlySelf:!0})),a instanceof l.gE&&Object.values(a.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))}),a instanceof l.Yp&&Object.values(a.controls).forEach(t=>{t instanceof l.gE&&Object.values(t.controls).forEach(s=>{s.invalid&&(s.markAsDirty(),s.updateValueAndValidity({onlySelf:!0}))})})})}function g(o){if(o.validator){const a=o.validator({});return a&&a.required}return!1}},5877:(y,f,i)=>{i.r(f),i.d(f,{ViewEmployeeAttendanceDetailsComponent:()=>V});var l=i(177),n=i(9079),g=i(4774),u=i(6354),h=i(980),_=i(765),o=i(9475),a=i(7109),t=i(7705),s=i(9417),d=i(353),p=i(3040),D=i(4177),F=i(6475),M=i(5816),O=i(7529),T=i(8927),z=i(1011),k=i(2513);let I=(()=>{class m{constructor(e,r,c,v){this._fb=e,this._modal=r,this._httpService=c,this._destroyRef=v,this.actionEmitter=new t.bkB,this.loading=!1,this.imgLoading=!1,this.warehouseList=[],this.storageTypes=[]}ngOnInit(){this.form=this.createForm(),this.formData&&this.form.patchValue(this.formData)}createForm(){return this._fb.group({oid:[null],attendance_date:[null,[s.k0.required]],sign_in_time:[null,[s.k0.required]],sign_in_location:[null,[s.k0.required]],sign_out_time:[null,[s.k0.required]],sign_out_location:[null,[s.k0.required]]})}handleConfirm(){let e="Do you want to create employee attendance data?";this.formData&&(e="Are you sure you want to save these updates?"),this._modal.create({nzContent:D.M,nzData:{message:e},nzFooter:null,nzClosable:!1,nzOnOk:()=>this.actionEmitter.emit({action:"submit",value:this.form.value})})}handleForm(){this.form.valid?this.handleConfirm():(0,p.N4)(this.form)}goBack(){this.actionEmitter.emit({action:"back",value:this.form.value})}hasRequiredValidator(e){const r=this.form.get(e);return!!r&&(0,p.op)(r)}static{this.\u0275fac=function(r){return new(r||m)(t.rXU(s.ok),t.rXU(F.N_),t.rXU(M.k),t.rXU(t.abz))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-employee-attendance-form"]],inputs:{formData:"formData",loading:"loading"},outputs:{actionEmitter:"actionEmitter"},standalone:!0,features:[t.aNF],decls:27,vars:10,consts:[[1,"rounded-md","bg-white"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],[1,"grid","grid-cols-1","md:gap-x-6","md:grid-cols-2","lg:grid-cols-4","border-[0.5px]","p-4","rounded-md"],[3,"nzRequired"],["nzErrorTip","Sign In Time is Required."],["formControlName","sign_in_time","nzFormat","HH:mm","nzPlaceHolder","Select Sign In Time","nzInputReadOnly","",1,"w-full"],["nzErrorTip","Sign In Location is Required."],["rows","2","formControlName","sign_in_location","nz-input","","placeholder","Enter Sign In Location","nzAutosize",""],["nzErrorTip","Sign Out Time is Required."],["formControlName","sign_out_time","nzFormat","HH:mm","nzPlaceHolder","Select Sign Out Time","nzInputReadOnly","",1,"w-full"],["nzErrorTip","Sign Out Location is Required."],["rows","2","formControlName","sign_out_location","nz-input","","placeholder","Enter Sign Out Location","nzAutosize",""],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"],[3,"label","loading","type"]],template:function(r,c){1&r&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return c.handleForm()}),t.j41(2,"div",2)(3,"nz-form-item")(4,"nz-form-label",3),t.EFF(5,"Sign In Time"),t.k0s(),t.j41(6,"nz-form-control",4),t.nrm(7,"nz-time-picker",5),t.k0s()(),t.j41(8,"nz-form-item")(9,"nz-form-label",3),t.EFF(10,"Sign In Location"),t.k0s(),t.j41(11,"nz-form-control",6),t.nrm(12,"textarea",7),t.k0s()(),t.j41(13,"nz-form-item")(14,"nz-form-label",3),t.EFF(15,"Sign Out Time"),t.k0s(),t.j41(16,"nz-form-control",8),t.nrm(17,"nz-time-picker",9),t.k0s()(),t.j41(18,"nz-form-item")(19,"nz-form-label",3),t.EFF(20,"Sign Out Location"),t.k0s(),t.j41(21,"nz-form-control",10),t.nrm(22,"textarea",11),t.k0s()()(),t.j41(23,"div",12)(24,"div",13)(25,"secondary-button",14),t.bIt("click",function(){return c.goBack()}),t.k0s(),t.nrm(26,"primary-button",15),t.k0s()()()()),2&r&&(t.R7$(1),t.Y8G("formGroup",c.form)("nzLayout","vertical"),t.R7$(3),t.Y8G("nzRequired",c.hasRequiredValidator("sign_in_time")),t.R7$(5),t.Y8G("nzRequired",c.hasRequiredValidator("sign_in_location")),t.R7$(5),t.Y8G("nzRequired",c.hasRequiredValidator("sign_out_time")),t.R7$(5),t.Y8G("nzRequired",c.hasRequiredValidator("sign_out_location")),t.R7$(6),t.Y8G("label","Cancel"),t.R7$(1),t.Y8G("label","Submit")("loading",c.loading)("type","submit"))},dependencies:[l.MD,a.Z,O.Uq,O.e,T.CA,T.Ls,T.Mo,T.zS,z.Sy,z.c9,k.zR,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,d.j,o.t]})}}return m})();var j=i(6504),A=i(4710),x=i(9448);function S(m,R){if(1&m&&t.nrm(0,"app-loader",4),2&m){const e=t.XpG();t.Y8G("isVisible",e.loading)}}function P(m,R){if(1&m){const e=t.RV6();t.j41(0,"div")(1,"app-employee-attendance-form",6),t.bIt("actionEmitter",function(c){t.eBV(e);const v=t.XpG(2);return t.Njj(v.handleActions(c))}),t.k0s()()}if(2&m){const e=t.XpG(2);t.R7$(1),t.Y8G("formData",e.itemDetails)}}function w(m,R){if(1&m){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"p"),t.EFF(4,"Employee Name"),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.j41(7,"div",9)(8,"p"),t.EFF(9,"Date"),t.k0s(),t.j41(10,"p",10),t.EFF(11),t.k0s()(),t.j41(12,"div",9)(13,"p"),t.EFF(14,"Total Time"),t.k0s(),t.j41(15,"p",11),t.EFF(16),t.k0s()()(),t.j41(17,"div",12)(18,"div",13)(19,"h2",14),t.EFF(20,"Sign In"),t.k0s(),t.nrm(21,"nz-divider"),t.j41(22,"div",12)(23,"div",9)(24,"p"),t.EFF(25,"Sign In Time"),t.k0s(),t.j41(26,"p",10),t.EFF(27),t.k0s()(),t.j41(28,"div",9)(29,"p"),t.EFF(30,"Sign In Location"),t.k0s(),t.j41(31,"p",10),t.EFF(32),t.k0s()()()(),t.j41(33,"div",13)(34,"h2",14),t.EFF(35,"Sign Out"),t.k0s(),t.nrm(36,"nz-divider"),t.j41(37,"div",12)(38,"div",9)(39,"p"),t.EFF(40,"Sign Out Time"),t.k0s(),t.j41(41,"p",10),t.EFF(42),t.k0s()(),t.j41(43,"div",9)(44,"p"),t.EFF(45,"Sign Out Location"),t.k0s(),t.j41(46,"p",10),t.EFF(47),t.k0s()()()()(),t.j41(48,"div",15)(49,"div",16)(50,"secondary-button",17),t.bIt("click",function(){t.eBV(e);const c=t.XpG(2);return t.Njj(c.goBack())}),t.k0s()()()()}if(2&m){const e=t.XpG(2);t.R7$(6),t.JRh(null==e.itemDetails?null:e.itemDetails.employee_name),t.R7$(5),t.JRh(null==e.itemDetails?null:e.itemDetails.parsed_attendance_date),t.R7$(4),t.Y8G("ngClass",e.getTotalTimeClass(e.itemDetails)),t.R7$(1),t.JRh(e.getTotalTime(e.itemDetails)),t.R7$(11),t.JRh(e.convertToBangladeshTime(null==e.itemDetails?null:e.itemDetails.sign_in_time)),t.R7$(5),t.SpI("",null==e.itemDetails?null:e.itemDetails.sign_in_location," "),t.R7$(10),t.JRh(e.convertToBangladeshTime(null==e.itemDetails?null:e.itemDetails.sign_out_time)),t.R7$(5),t.SpI("",null==e.itemDetails?null:e.itemDetails.sign_out_location," "),t.R7$(3),t.Y8G("label","Go Back")}}function B(m,R){if(1&m&&(t.j41(0,"div"),t.DNE(1,P,2,1,"div",3),t.DNE(2,w,51,9,"div",5),t.k0s()),2&m){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.editMode),t.R7$(1),t.Y8G("ngIf",!e.editMode)}}let V=(()=>{class m{constructor(e,r,c,v,E){this._httpService=e,this._destroyRef=r,this._notificationService=c,this._activatedRoute=v,this._location=E,this.editMode=!1,this.loading=!1,this._activatedRoute.paramMap.pipe((0,u.T)(()=>window.history.state)).pipe((0,n.pQ)(this._destroyRef)).subscribe(b=>{this.editMode=b.edit})}ngOnInit(){this.loadItemDetails()}goBack(){this._location.back()}handleActions(e){"submit"===e.action?this.updateItemDetails(e.value):"back"===e.action&&this.goBack()}updateItemDetails(e){this.loading=!0,this._httpService.post(g.A.UPDATE_EMPLOYEE_ATTENDANCE,e).pipe((0,n.pQ)(this._destroyRef),(0,h.j)(()=>this.loading=!1)).subscribe({next:r=>{this._notificationService.success("Success!",r?.body?.message),this._location.back()},error:r=>{console.log(r),this._notificationService.error("Error!",r?.error?.message)}})}loadItemDetails(){this.loading=!0,this._httpService.get(g.A.GET_EMPLOYEE_ATTENDANCE_DETAILS,{oid:this.oid}).pipe((0,n.pQ)(this._destroyRef),(0,h.j)(()=>this.loading=!1)).subscribe({next:e=>{200===e.status&&(this.itemDetails=e?.body?.data,console.log(this.itemDetails))},error:e=>{console.log(e),this._notificationService.error("Error!",e?.error?.message)}})}convertToBangladeshTime(e){if(e){const r=new Date(e);return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Dhaka"}).format(r)}return null}getTotalTime(e){if(!e?.attendance_date)return"Invalid data.";const r=new Date,c=new Date(e.attendance_date),v=c.getFullYear()===r.getFullYear()&&c.getMonth()===r.getMonth()&&c.getDate()===r.getDate(),E=e?.sign_in_time?new Date(e.sign_in_time):null,C=e?.sign_out_time?new Date(e.sign_out_time):null;if(!E)return v?"Not signed in yet.":"Absent";if(E&&!C)return v?"Currently signed in.":"Missed signing out.";if(E&&C){const b=C.getTime()-E.getTime();return b<=0?"Invalid time range.":`Total Time: ${Math.floor(b/36e5)}h ${Math.floor(b%36e5/6e4)}m`}return"Invalid data."}getTotalTimeClass(e){switch(this.getTotalTime(e)){case"Absent":case"Missed signing out.":return"text-red-500";case"Not signed in yet.":return"text-yellow-500";case"Currently signed in.":return"text-green-500";default:return"text-gray-500"}}static{this.\u0275fac=function(r){return new(r||m)(t.rXU(M.k),t.rXU(t.abz),t.rXU(j.xY),t.rXU(A.nX),t.rXU(l.aZ))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-view-employee-attendance-details"]],inputs:{oid:"oid"},standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[3,"isVisible",4,"ngIf"],[4,"ngIf"],[3,"isVisible"],["class","space-y-4",4,"ngIf"],[3,"formData","actionEmitter"],[1,"space-y-4"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-3","border-[0.5px]","p-4","rounded-md","text-base"],[1,"space-y-1"],[1,"font-semibold","text-secondary"],[1,"font-semibold","text-secondary",3,"ngClass"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-2"],[1,"space-y-4","border-[0.5px]","p-4","rounded-md"],[1,"font-semibold","text-base"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"]],template:function(r,c){1&r&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Attendance Details"),t.k0s(),t.DNE(3,S,1,1,"app-loader",2),t.DNE(4,B,3,2,"div",3),t.k0s()),2&r&&(t.R7$(3),t.Y8G("ngIf",c.loading),t.R7$(1),t.Y8G("ngIf",!c.loading&&c.itemDetails))},dependencies:[l.MD,l.YU,l.bT,_.V,o.t,a.Z,x.j,I]})}}return m})()},353:(y,f,i)=>{i.d(f,{j:()=>o});var l=i(177),n=i(7705);let g=(()=>{class a{static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=n.VBU({type:a,selectors:[["app-spinner"]],standalone:!0,features:[n.aNF],decls:3,vars:0,consts:[["fill","none","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"-ml-1","mr-3","h-5","w-5","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z","fill","currentColor",1,"opacity-75"]],template:function(d,p){1&d&&(n.qSk(),n.j41(0,"svg",0),n.nrm(1,"circle",1)(2,"path",2),n.k0s())},dependencies:[l.MD]})}}return a})();var u=i(7002);function h(a,t){1&a&&(n.j41(0,"span"),n.nrm(1,"app-spinner"),n.k0s())}function _(a,t){if(1&a&&(n.j41(0,"span",4),n.EFF(1),n.k0s()),2&a){const s=n.XpG();n.R7$(1),n.SpI(" ",s.label," ")}}let o=(()=>{class a{constructor(){this.type="button",this.loading=!1}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=n.VBU({type:a,selectors:[["primary-button"]],inputs:{label:"label",type:"type",loading:"loading"},standalone:!0,features:[n.aNF],decls:4,vars:5,consts:[["disableForGuest","",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-not-allowed",3,"disabled","type"],[1,"absolute","inset-0","w-2","bg-primary","transition-all","duration-300","ease-in-out","group-hover:w-full",3,"ngClass"],[4,"ngIf"],["class","relative z-10 whitespace-nowrap text-black transition-all duration-300 group-hover:text-white",4,"ngIf"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(d,p){1&d&&(n.j41(0,"button",0),n.nrm(1,"div",1),n.DNE(2,h,2,0,"span",2),n.DNE(3,_,2,1,"span",3),n.k0s()),2&d&&(n.Y8G("disabled",p.loading)("type",p.type),n.R7$(1),n.Y8G("ngClass",p.loading?"w-full":""),n.R7$(1),n.Y8G("ngIf",p.loading),n.R7$(1),n.Y8G("ngIf",!p.loading))},dependencies:[l.MD,l.YU,l.bT,g,u.x]})}}return a})()},9475:(y,f,i)=>{i.d(f,{t:()=>g});var l=i(177),n=i(7705);let g=(()=>{class u{constructor(){this.type="button"}static{this.\u0275fac=function(o){return new(o||u)}}static{this.\u0275cmp=n.VBU({type:u,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[n.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(o,a){1&o&&(n.j41(0,"button",0),n.nrm(1,"div",1),n.j41(2,"span",2),n.EFF(3),n.k0s()()),2&o&&(n.R7$(3),n.SpI(" ",a.label," "))},dependencies:[l.MD]})}}return u})()},4177:(y,f,i)=>{i.d(f,{M:()=>a});var l=i(177),n=i(7109),g=i(5088),u=i(6475),h=i(353),_=i(9475),o=i(7705);let a=(()=>{class t{constructor(d,p){this.modalData=d,this._modalRef=p}handleConfirm(){this._modalRef.triggerOk()}closeModal(){this._modalRef.triggerCancel()}static{this.\u0275fac=function(p){return new(p||t)(o.rXU(u.or),o.rXU(u.J9))}}static{this.\u0275cmp=o.VBU({type:t,selectors:[["app-confirmation-modal"]],standalone:!0,features:[o.aNF],decls:7,vars:5,consts:[[1,"w-full","flex","flex-col","items-center","p-5"],["src","assets/icons/undraw_confirmation.svg","alt","",1,"w-2/3","mx-auto"],[1,"text-black","mt-6","mb-9","font-semibold","text-lg"],[1,"flex","items-center","gap-8"],[3,"label","type","click"]],template:function(p,D){1&p&&(o.j41(0,"div",0),o.nrm(1,"img",1),o.j41(2,"p",2),o.EFF(3),o.k0s(),o.j41(4,"div",3)(5,"secondary-button",4),o.bIt("click",function(){return D.closeModal()}),o.k0s(),o.j41(6,"primary-button",4),o.bIt("click",function(){return D.handleConfirm()}),o.k0s()()()),2&p&&(o.R7$(3),o.JRh(D.modalData.message),o.R7$(2),o.Y8G("label","Cancel")("type","button"),o.R7$(1),o.Y8G("label","Confirm")("type","button"))},dependencies:[l.MD,n.Z,g.iu,h.j,_.t]})}}return t})()},765:(y,f,i)=>{i.d(f,{V:()=>u});var l=i(177),n=i(7705);function g(h,_){1&h&&(n.j41(0,"div",1),n.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),n.k0s())}let u=(()=>{class h{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(a){return new(a||h)}}static{this.\u0275cmp=n.VBU({type:h,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[n.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(a,t){1&a&&n.DNE(0,g,6,0,"div",0),2&a&&n.Y8G("ngIf",t.isVisible)},dependencies:[l.MD,l.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return h})()},7002:(y,f,i)=>{i.d(f,{x:()=>g});var l=i(7705),n=i(3769);let g=(()=>{class u{constructor(_,o,a){this.el=_,this.renderer=o,this.authService=a}ngOnInit(){this.authService.getGuestUserStatus()&&this.renderer.setAttribute(this.el.nativeElement,"disabled","true")}static{this.\u0275fac=function(o){return new(o||u)(l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(n.u))}}static{this.\u0275dir=l.FsC({type:u,selectors:[["","disableForGuest",""]],standalone:!0})}}return u})()}}]);