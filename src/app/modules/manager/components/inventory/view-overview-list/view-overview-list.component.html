<app-loader *ngIf="loading" [isVisible]="loading"></app-loader>
<div *ngIf="!loading" class="p-4 border rounded-md">
      <ul *ngIf="data.length" class="divide-y divide-gray-100 space-y-4">
            <ng-container *ngFor="let item of data">
                  <nz-ribbon [nzText]="getStatusText(item.has_pending_pricing, item.has_for_sale_batch)"
                        [nzColor]="getRibbonColor(item)">
                        <li class="grid md:grid-cols-3 gap-x-6 py-5 shadow-sm border p-4 rounded-md">
                              <div class="flex min-w-0 gap-x-4">
                                    <img *ngIf="item?.photo" class="size-12 flex-none rounded-full bg-gray-50"
                                          [src]="item.photo" alt="Picture Of User">
                                    <div *ngIf="!item?.photo"
                                          class="size-12 flex-none rounded-full bg-gray-50 flex items-center justify-center">
                                          <p class="text-xl">{{ getFirstLetter(item?.product_name) }}</p>
                                    </div>
                                    <div class="min-w-0 flex-auto">
                                          <p class="text-sm/6 text-[#180B26] font-semibold">Product Name: <span
                                                      class="font-normal">{{
                                                      item?.product_name }}</span></p>

                                          <p class="mt-1 text-xs/5 text-[#180B26] font-semibold">Total Available
                                                Quantity: <span class="font-normal"
                                                      [ngClass]="getRestockThresholdStatus(item) ? 'text-[#DF1463]' : 'text-[#5EB248]'">{{
                                                      item?.total_available_quantity
                                                      }}</span></p>
                                          <div *ngIf="getRestockThresholdStatus(item)"
                                                class="mt-1 bg-[#DF1463] inline-flex justify-center items-center h-5 px-1 rounded gap-2">
                                                <svg-icon src="assets/icons/warning.svg"
                                                      class="transition-transform duration-150 ease-in-out"></svg-icon>
                                                <span class="text-xs font-normal text-white">Low-Stock</span>
                                          </div>
                                    </div>
                              </div>
                              <div class="flex md:justify-center items-center">
                                    <div>
                                          <p class="mt-1 truncate text-xs/5 text-gray-500 font-semibold">Total Batches:
                                                <span class="font-normal">{{ item?.total_batches }}</span>
                                          </p>
                                          <p class="mt-1 truncate text-xs/5 text-gray-500 font-semibold">Restock
                                                Quantity:
                                                <span class="font-normal">{{ item?.restock_threshold }}</span>
                                          </p>
                                    </div>
                              </div>
                              <div class="flex justify-end">
                                    <div class="shrink-0 sm:flex sm:flex-col sm:items-center">
                                          <div class="mt-1 text-xs/5 text-black flex justify-center items-center gap-4 h-full">
                                                <button (click)="handleAction('view', item)">
                                                      <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                                            class="size-6">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                                      </svg>
                                                </button>
                                          </div>
                                    </div>
                              </div>
                        </li>
                  </nz-ribbon>
            </ng-container>
      </ul>
      <div *ngIf="!data.length"
            class="flex flex-col items-center justify-center h-full text-center bg-gray-50 p-8 rounded-md space-y-4">
            <img src="assets/icons/no_data.svg" alt="No Data Found">
            <h2 class="text-lg font-semibold text-black">No Data Found</h2>
            <p class="text-black">Try refining your search.</p>
      </div>
      <div class="bg-white grid grid-cols-1 h-16">
            <div class="flex items-center justify-end mr-6">
                  <nz-pagination [(nzPageIndex)]="currentIndex" [(nzPageSize)]="pageSize" [nzShowSizeChanger]="true"
                        [nzShowTotal]="rangeTemplate" [nzTotal]="totalCount"
                        (nzPageIndexChange)="onPageIndexChange($event)" (nzPageSizeChange)="onPageSizeChange($event)">
                  </nz-pagination>
                  <ng-template #rangeTemplate let-range="range" let-total>
                        {{ range[0] }} - {{ range[1] }} of {{ total }} items
                  </ng-template>

            </div>
      </div>
</div>