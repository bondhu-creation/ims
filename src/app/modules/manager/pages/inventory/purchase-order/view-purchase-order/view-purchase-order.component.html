<div class="p-4 space-y-3">
      <h2 class="text-2xl font-medium mb-4 animate-text">Purchase Order</h2>
      <app-loader *ngIf="loading" [isVisible]="loading"></app-loader>
      <div *ngIf="!editMode && purchaseDetails" class="space-y-4">
            <div class="border-[0.5px] p-4 rounded-md">
                  <h2 class="text-xl font-medium">Purchase Details</h2>
                  <nz-divider class="my-4"></nz-divider>
                  <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
                        <!-- supplier_oid -->
                        <div class="space-y-1">
                              <p>Supplier</p>
                              <p class="font-semibold">{{ purchaseDetails?.supplier_name }}</p>
                        </div>
                        <!-- total_amount -->
                        <div class="space-y-1">
                              <p>Total Amount</p>
                              <p class="font-semibold">{{ purchaseDetails?.total_amount }}</p>
                        </div>
                        <!-- purchase_type -->
                        <div class="space-y-1">
                              <p>Purchase Type</p>
                              <p class="font-semibold">{{ getPurchaseType(purchaseDetails?.purchase_type) }}</p>
                        </div>
                        <!-- payment_status -->
                        <div class="space-y-1">
                              <p>Payment Status</p>
                              <p class="font-semibold">{{ getPaymentStatus(purchaseDetails?.payment_status) }}</p>
                        </div>
                        <!-- paid_amount -->
                        <div class="space-y-1">
                              <p>Paid Amount</p>
                              <p class="font-semibold">{{ purchaseDetails?.paid_amount }}</p>
                        </div>
                        <!-- special_notes -->
                        <div class="space-y-1">
                              <p>Special Notes</p>
                              <p class="font-semibold">{{ purchaseDetails?.special_notes }}</p>
                        </div>
                        <!-- status -->
                        <div class="space-y-1">
                              <p>Status</p>
                              <p [class]="getStatusClass(purchaseDetails?.status)">{{ purchaseDetails?.status }}</p>
                        </div>
                        <div *ngIf="purchaseDetails.status === 'Verified'" class="space-y-1">
                              <p>Verified By</p>
                              <p class="font-semibold">{{ purchaseDetails?.verified_by }}</p>
                        </div>
                  </div>
            </div>
            <div class="border-[0.5px] p-4 rounded-md">
                  <div class="flex justify-between items-center">
                        <h2 class="text-xl font-medium">Products Information</h2>
                        <p>Calculated Amount: &#2547; <span class="font-semibold">{{ currentTotalPrice }}</span>
                        </p>
                  </div>
                  <nz-divider class="my-4"></nz-divider>
                  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-5 gap-4">
                        <!-- Loop through all products -->
                        <ng-container *ngFor="let product of products; let i = index">
                              <nz-card [nzTitle]="titleTem" class="shadow-lg">
                                    <nz-card-meta [nzDescription]="descriptionTem"></nz-card-meta>
                              </nz-card>
                              <ng-template #titleTem>
                                    <p class="font-semibold text-secondary">{{ product?.product_name }}</p>
                              </ng-template>
                              <ng-template #descriptionTem>
                                    <div class="space-y-1">
                                          <p class="text-sm font-light text-secondary">Quantity:
                                                <span class="font-semibold">{{product?.quantity}}</span>
                                          </p>
                                          <p class="text-sm font-light text-secondary">Unit Price:
                                                <span class="font-semibold">&#2547;{{product?.unit_price}}</span>
                                          </p>
                                          <p class="text-sm font-light text-secondary">Total Price:
                                                <span class="font-semibold">&#2547;{{ calculateTotalPrice(product)
                                                      }}</span>
                                          </p>
                                          <p class="text-sm font-light text-secondary">Warehouse:
                                                <span class="font-semibold">{{ product?.warehouse_name }}</span>
                                          </p>
                                          <div
                                                *ngIf="purchaseDetails.status === 'Verified' && product.intended_use === 'for_sale'">
                                                <nz-divider></nz-divider>
                                                <p class="text-sm font-light text-secondary">Selling Price:
                                                      <span class="font-semibold">{{ product?.selling_price }}</span>
                                                </p>
                                                <p class="text-sm font-light text-secondary">Maximum Discount Range:
                                                      <span class="font-semibold">{{ product?.maximum_discount }}
                                                            %</span>
                                                </p>
                                          </div>
                                    </div>
                              </ng-template>
                        </ng-container>
                  </div>
            </div>
            <app-order-verification-form class="" *ngIf="displayFormType === 'Verify'"
                  [purchaseDetails]="purchaseDetails"
                  (actionEmitter)="handleVerificationFormActions($event)"></app-order-verification-form>
            <!-- Actions -->
            <div *ngIf="displayFormType === ''" class="flex justify-end mt-4">
                  <div class="flex items-center gap-4">
                        <secondary-button [label]="'Go Back'" (click)="goBack()"></secondary-button>
                        <primary-button *ngIf="getVerificationButtonStatus()" [label]="'Verify Order'" [type]="'button'"
                              (click)="handleVerifyPurchaseOrder()"></primary-button>
                        <danger-button *ngIf="getCancelButtonStatus()" [label]="'Cancel Order'" [type]="'button'"
                              (click)="displayCancelConfirmation()"></danger-button>
                  </div>
            </div>
      </div>
      <div *ngIf="editMode && purchaseDetails">
            <app-purchase-order-form [loading]="loading" [formData]="purchaseDetails"
                  (actionEmitter)="handleActions($event)"></app-purchase-order-form>
      </div>
      <div *ngIf="!loading && !purchaseDetails"
            class="flex flex-col items-center justify-center h-full text-center bg-gray-50 p-8 rounded-md space-y-4">
            <img src="assets/icons/no_data.svg" alt="No Data Found">
            <h2 class="text-lg font-semibold text-black">No Data Found</h2>
      </div>
</div>