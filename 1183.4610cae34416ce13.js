"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[1183],{3040:(v,_,n)=>{n.d(_,{N4:()=>e,op:()=>p});var t=n(9417);function e(o){Object.values(o.controls).forEach(r=>{r.invalid&&(r.markAsDirty(),r.updateValueAndValidity({onlySelf:!0})),r instanceof t.gE&&Object.values(r.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))}),r instanceof t.Yp&&Object.values(r.controls).forEach(i=>{i instanceof t.gE&&Object.values(i.controls).forEach(s=>{s.invalid&&(s.markAsDirty(),s.updateValueAndValidity({onlySelf:!0}))})})})}function p(o){if(o.validator){const r=o.validator({});return r&&r.required}return!1}},2530:(v,_,n)=>{n.d(_,{E:()=>g});var t=n(5312),e=n(9437),p=n(7673),a=n(7705),u=n(1626);let g=(()=>{class o{constructor(i){this.http=i,this.uploadUrl=`https://api.cloudinary.com/v1_1/${t.c.cloudinary.cloudName}/image/upload`}uploadImage(i){const s=new FormData;return s.append("file",i),s.append("upload_preset",t.c.cloudinary.uploadPreset),s.append("cloud_name",t.c.cloudinary.cloudName),s.append("folder","ims"),this.http.post(this.uploadUrl,s).pipe((0,e.W)(l=>(console.error("Upload failed",l),(0,p.of)({error:"Upload failed, please try again later."}))))}static{this.\u0275fac=function(s){return new(s||o)(a.KVO(u.Qq))}}static{this.\u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},1183:(v,_,n)=>{n.d(_,{f:()=>k});var t=n(7705),e=n(177),p=n(7109),a=n(9417),u=n(3040),g=n(4177),o=n(3887),r=n(765),i=n(353),s=n(9475),l=n(6475),f=n(5816),M=n(6504),y=n(2530),P=n(7529),C=n(8927),z=n(1011),R=n(1997);function I(d,E){1&d&&(t.qSk(),t.j41(0,"svg",35),t.nrm(1,"path",36),t.k0s())}function U(d,E){if(1&d&&t.nrm(0,"app-loader",37),2&d){const c=t.XpG(2);t.Y8G("isVisible",c.imgLoading)}}function T(d,E){if(1&d){const c=t.RV6();t.j41(0,"div",32),t.bIt("click",function(){t.eBV(c),t.XpG();const m=t.sdS(8);return t.Njj(m.click())}),t.DNE(1,I,2,0,"svg",33),t.DNE(2,U,1,1,"app-loader",34),t.k0s()}if(2&d){const c=t.XpG();t.R7$(1),t.Y8G("ngIf",!c.imgLoading),t.R7$(1),t.Y8G("ngIf",c.imgLoading)}}function F(d,E){1&d&&(t.j41(0,"p",38),t.EFF(1," Upload a file"),t.k0s())}function B(d,E){1&d&&(t.j41(0,"p",39),t.EFF(1,"PNG, JPG, GIF up to 10MB "),t.k0s())}function L(d,E){if(1&d&&t.nrm(0,"img",40),2&d){const c=t.XpG();t.Y8G("src",c.form.controls.photo.value,t.B4B)}}function A(d,E){if(1&d&&(t.qex(0),t.nrm(1,"nz-option",41),t.bVm()),2&d){const c=E.$implicit;t.R7$(1),t.Y8G("nzLabel",c)("nzValue",c)}}function w(d,E){if(1&d&&(t.j41(0,"nz-form-item")(1,"nz-form-label",11),t.EFF(2,"Password"),t.k0s(),t.j41(3,"nz-form-control",42),t.nrm(4,"input",43),t.k0s()()),2&d){const c=t.XpG();t.R7$(1),t.Y8G("nzRequired",c.hasRequiredValidator("password"))}}let k=(()=>{class d{constructor(c,h,m,D,b,O){this._fb=c,this._modal=h,this._httpService=m,this._destroyRef=D,this._notificationService=b,this._fileService=O,this.actionEmitter=new t.bkB,this.loading=!1,this.imgLoading=!1,this.roleList=[],this.roleList=Object.values(o.gg)}ngOnInit(){this.form=this.createForm(),this.formData&&(this.form.patchValue(this.formData),this.form.removeControl("password"))}createForm(){return this._fb.group({oid:[null],name:[null,[a.k0.required]],email:[null,[a.k0.required]],mobile_number:[null,[a.k0.required]],role:[null,[a.k0.required]],designation:[null],photo:[null],password:[null,[a.k0.required]],status:["Active",[a.k0.required]]})}handleConfirm(){let c="Do you want to create an user?";this.formData&&(c="Do you want to update this user?"),this._modal.create({nzContent:g.M,nzData:{message:c},nzFooter:null,nzClosable:!1,nzOnOk:()=>this.actionEmitter.emit({action:"submit",value:this.form.value})})}handleForm(){this.form.valid?this.handleConfirm():(0,u.N4)(this.form)}goBack(){this.actionEmitter.emit({action:"back",value:this.form.value})}hasRequiredValidator(c){const h=this.form.get(c);return!!h&&(0,u.op)(h)}triggerFileInput(){document.querySelector("#fileInput").click()}onFileSelected(c){const h=c.target;if(h.files&&h.files[0]){const m=h.files[0];if(m.size>512e3)return void this._notificationService.error("Error","File size exceeds 500 KB. Please upload a smaller file.");this.imgLoading=!0,this._fileService.uploadImage(m).subscribe({next:b=>{this.form.controls.photo.setValue(b.secure_url),this.imgLoading=!1},error:b=>{this._notificationService.error("Error","Failed to upload image"),console.error("Image upload error:",b),this.imgLoading=!1}})}}static{this.\u0275fac=function(h){return new(h||d)(t.rXU(a.ok),t.rXU(l.N_),t.rXU(f.k),t.rXU(t.abz),t.rXU(M.xY),t.rXU(y.E))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["app-user-form"]],inputs:{formData:"formData",loading:"loading"},outputs:{actionEmitter:"actionEmitter"},standalone:!0,features:[t.aNF],decls:49,vars:19,consts:[[1,"rounded-md","bg-white"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],[1,"grid","grid-cols-1","gap-y-6","lg:gap-6","md:grid-cols-2","lg:grid-cols-3","border-[0.5px]","p-4","rounded-md"],[1,"p-4","border-[0.5px]","rounded-md","shadow-md","md:col-span-2","lg:col-span-1","flex","flex-col","items-center","justify-center"],["class"," flex flex-col items-center justify-center w-32 h-32 border-[0.5px] border-dashed rounded-full shadow-md cursor-pointer",3,"click",4,"ngIf"],["class","text-center text-blue-500 font-medium mt-4",4,"ngIf"],["class","text-xs text-gray-500",4,"ngIf"],["type","file","accept",".png,.jpg,.jpeg,.gif",1,"hidden",3,"change"],["fileInput",""],["class"," w-32 h-32 border-[0.5px] border-dashed rounded-full shadow-md","alt","User Photo",3,"src",4,"ngIf"],[1,"grid","grid-cols-1","gap-x-6","md:grid-cols-2","border-[0.5px]","p-4","rounded-md","col-span-2"],[3,"nzRequired"],["nzErrorTip","Name is Required."],["formControlName","name","nz-input","","placeholder","Enter Name"],["nzErrorTip","Email is Required."],["formControlName","email","nz-input","","placeholder","Enter Email Address",3,"readOnly"],["nzErrorTip","Mobile Number is Required."],["formControlName","mobile_number","nz-input","","placeholder","Enter Mobile Number"],["nzErrorTip","Role is Required."],["formControlName","role","nz-input","","nzAllowClear","","nzPlaceHolder","Select Role",1,"w-full"],[4,"ngFor","ngForOf"],["nzErrorTip","Designation is Required."],["formControlName","designation","nz-input","","placeholder","Enter Designation"],[4,"ngIf"],["nzErrorTip","Status is required."],["formControlName","status","nz-input","","nzAllowClear","","nzPlaceHolder","Select Status",1,"w-full"],["nzLabel","Active","nzValue","Active"],["nzLabel","Inactive","nzValue","Inactive"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"],[3,"loading","label","type"],[1,"flex","flex-col","items-center","justify-center","w-32","h-32","border-[0.5px]","border-dashed","rounded-full","shadow-md","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","size-6",4,"ngIf"],[3,"isVisible",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"],[3,"isVisible"],[1,"text-center","text-blue-500","font-medium","mt-4"],[1,"text-xs","text-gray-500"],["alt","User Photo",1,"w-32","h-32","border-[0.5px]","border-dashed","rounded-full","shadow-md",3,"src"],[3,"nzLabel","nzValue"],["nzErrorTip","Password is Required."],["formControlName","password","nz-input","","placeholder","Enter Password"]],template:function(h,m){1&h&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return m.handleForm()}),t.j41(2,"div",2)(3,"div",3),t.DNE(4,T,3,2,"div",4),t.DNE(5,F,2,0,"p",5),t.DNE(6,B,2,0,"p",6),t.j41(7,"input",7,8),t.bIt("change",function(b){return m.onFileSelected(b)}),t.k0s(),t.DNE(9,L,1,1,"img",9),t.k0s(),t.j41(10,"div",10)(11,"nz-form-item")(12,"nz-form-label",11),t.EFF(13,"Name"),t.k0s(),t.j41(14,"nz-form-control",12),t.nrm(15,"input",13),t.k0s()(),t.j41(16,"nz-form-item")(17,"nz-form-label",11),t.EFF(18,"Email"),t.k0s(),t.j41(19,"nz-form-control",14),t.nrm(20,"input",15),t.k0s()(),t.j41(21,"nz-form-item")(22,"nz-form-label",11),t.EFF(23,"Mobile Number"),t.k0s(),t.j41(24,"nz-form-control",16),t.nrm(25,"input",17),t.k0s()(),t.j41(26,"nz-form-item")(27,"nz-form-label",11),t.EFF(28,"Role"),t.k0s(),t.j41(29,"nz-form-control",18)(30,"nz-select",19),t.DNE(31,A,2,2,"ng-container",20),t.k0s()()(),t.j41(32,"nz-form-item")(33,"nz-form-label",11),t.EFF(34,"Designation"),t.k0s(),t.j41(35,"nz-form-control",21),t.nrm(36,"input",22),t.k0s()(),t.DNE(37,w,5,1,"nz-form-item",23),t.j41(38,"nz-form-item")(39,"nz-form-label",11),t.EFF(40,"Status"),t.k0s(),t.j41(41,"nz-form-control",24)(42,"nz-select",25),t.nrm(43,"nz-option",26)(44,"nz-option",27),t.k0s()()()()(),t.j41(45,"div",28)(46,"div",29)(47,"secondary-button",30),t.bIt("click",function(){return m.goBack()}),t.k0s(),t.nrm(48,"primary-button",31),t.k0s()()()()),2&h&&(t.R7$(1),t.Y8G("formGroup",m.form)("nzLayout","vertical"),t.R7$(3),t.Y8G("ngIf",!m.form.controls.photo.value),t.R7$(1),t.Y8G("ngIf",!m.form.controls.photo.value),t.R7$(1),t.Y8G("ngIf",!m.form.controls.photo.value),t.R7$(3),t.Y8G("ngIf",m.form.controls.photo.value),t.R7$(3),t.Y8G("nzRequired",m.hasRequiredValidator("name")),t.R7$(5),t.Y8G("nzRequired",m.hasRequiredValidator("email")),t.R7$(3),t.Y8G("readOnly",m.formData),t.R7$(2),t.Y8G("nzRequired",m.hasRequiredValidator("mobile_number")),t.R7$(5),t.Y8G("nzRequired",m.hasRequiredValidator("role")),t.R7$(4),t.Y8G("ngForOf",m.roleList),t.R7$(2),t.Y8G("nzRequired",m.hasRequiredValidator("designation")),t.R7$(4),t.Y8G("ngIf",!m.formData),t.R7$(2),t.Y8G("nzRequired",m.hasRequiredValidator("status")),t.R7$(8),t.Y8G("label","Cancel"),t.R7$(1),t.Y8G("loading",m.loading)("label","Submit")("type","submit"))},dependencies:[e.MD,e.Sq,e.bT,p.Z,P.Uq,P.e,C.CA,C.Ls,C.Mo,C.zS,z.Sy,R.ld,R.WI,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,r.V,i.j,s.t],styles:["input[type=file][_ngcontent-%COMP%]{display:none}"]})}}return d})()},353:(v,_,n)=>{n.d(_,{j:()=>o});var t=n(177),e=n(7705);let p=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-spinner"]],standalone:!0,features:[e.aNF],decls:3,vars:0,consts:[["fill","none","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"-ml-1","mr-3","h-5","w-5","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z","fill","currentColor",1,"opacity-75"]],template:function(l,f){1&l&&(e.qSk(),e.j41(0,"svg",0),e.nrm(1,"circle",1)(2,"path",2),e.k0s())},dependencies:[t.MD]})}}return r})();var a=n(7002);function u(r,i){1&r&&(e.j41(0,"span"),e.nrm(1,"app-spinner"),e.k0s())}function g(r,i){if(1&r&&(e.j41(0,"span",4),e.EFF(1),e.k0s()),2&r){const s=e.XpG();e.R7$(1),e.SpI(" ",s.label," ")}}let o=(()=>{class r{constructor(){this.type="button",this.loading=!1}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["primary-button"]],inputs:{label:"label",type:"type",loading:"loading"},standalone:!0,features:[e.aNF],decls:4,vars:5,consts:[["disableForGuest","",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-not-allowed",3,"disabled","type"],[1,"absolute","inset-0","w-2","bg-primary","transition-all","duration-300","ease-in-out","group-hover:w-full",3,"ngClass"],[4,"ngIf"],["class","relative z-10 whitespace-nowrap text-black transition-all duration-300 group-hover:text-white",4,"ngIf"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(l,f){1&l&&(e.j41(0,"button",0),e.nrm(1,"div",1),e.DNE(2,u,2,0,"span",2),e.DNE(3,g,2,1,"span",3),e.k0s()),2&l&&(e.Y8G("disabled",f.loading)("type",f.type),e.R7$(1),e.Y8G("ngClass",f.loading?"w-full":""),e.R7$(1),e.Y8G("ngIf",f.loading),e.R7$(1),e.Y8G("ngIf",!f.loading))},dependencies:[t.MD,t.YU,t.bT,p,a.x]})}}return r})()},9475:(v,_,n)=>{n.d(_,{t:()=>p});var t=n(177),e=n(7705);let p=(()=>{class a{constructor(){this.type="button"}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[e.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(o,r){1&o&&(e.j41(0,"button",0),e.nrm(1,"div",1),e.j41(2,"span",2),e.EFF(3),e.k0s()()),2&o&&(e.R7$(3),e.SpI(" ",r.label," "))},dependencies:[t.MD]})}}return a})()},4177:(v,_,n)=>{n.d(_,{M:()=>r});var t=n(177),e=n(7109),p=n(5088),a=n(6475),u=n(353),g=n(9475),o=n(7705);let r=(()=>{class i{constructor(l,f){this.modalData=l,this._modalRef=f}handleConfirm(){this._modalRef.triggerOk()}closeModal(){this._modalRef.triggerCancel()}static{this.\u0275fac=function(f){return new(f||i)(o.rXU(a.or),o.rXU(a.J9))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-confirmation-modal"]],standalone:!0,features:[o.aNF],decls:7,vars:5,consts:[[1,"w-full","flex","flex-col","items-center","p-5"],["src","assets/icons/undraw_confirmation.svg","alt","",1,"w-2/3","mx-auto"],[1,"text-black","mt-6","mb-9","font-semibold","text-lg"],[1,"flex","items-center","gap-8"],[3,"label","type","click"]],template:function(f,M){1&f&&(o.j41(0,"div",0),o.nrm(1,"img",1),o.j41(2,"p",2),o.EFF(3),o.k0s(),o.j41(4,"div",3)(5,"secondary-button",4),o.bIt("click",function(){return M.closeModal()}),o.k0s(),o.j41(6,"primary-button",4),o.bIt("click",function(){return M.handleConfirm()}),o.k0s()()()),2&f&&(o.R7$(3),o.JRh(M.modalData.message),o.R7$(2),o.Y8G("label","Cancel")("type","button"),o.R7$(1),o.Y8G("label","Confirm")("type","button"))},dependencies:[t.MD,e.Z,p.iu,u.j,g.t]})}}return i})()},765:(v,_,n)=>{n.d(_,{V:()=>a});var t=n(177),e=n(7705);function p(u,g){1&u&&(e.j41(0,"div",1),e.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),e.k0s())}let a=(()=>{class u{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(r){return new(r||u)}}static{this.\u0275cmp=e.VBU({type:u,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(r,i){1&r&&e.DNE(0,p,6,0,"div",0),2&r&&e.Y8G("ngIf",i.isVisible)},dependencies:[t.MD,t.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return u})()},7002:(v,_,n)=>{n.d(_,{x:()=>p});var t=n(7705),e=n(3769);let p=(()=>{class a{constructor(g,o,r){this.el=g,this.renderer=o,this.authService=r}ngOnInit(){this.authService.getGuestUserStatus()&&this.renderer.setAttribute(this.el.nativeElement,"disabled","true")}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(t.aKT),t.rXU(t.sFG),t.rXU(e.u))}}static{this.\u0275dir=t.FsC({type:a,selectors:[["","disableForGuest",""]],standalone:!0})}}return a})()}}]);