"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[1440],{1440:(C,g,o)=>{o.r(g),o.d(g,{DisplayEmployeeAttendanceListComponent:()=>P});var c=o(177),l=o(9417),m=o(7109),h=o(9079),p=o(4774),u=o(3887),_=o(980),t=o(7705),f=o(765),x=o(6505);function T(i,d){if(1&i&&t.nrm(0,"app-loader",2),2&i){const e=t.XpG();t.Y8G("isVisible",e.loading)}}function F(i,d){if(1&i&&(t.j41(0,"li",13)(1,"p",14),t.EFF(2,"Date: "),t.j41(3,"span",15),t.EFF(4),t.k0s()(),t.j41(5,"p",16),t.EFF(6,"Sign In: "),t.j41(7,"span",15),t.EFF(8),t.k0s()(),t.j41(9,"p",16),t.EFF(10,"Sign Out: "),t.j41(11,"span",15),t.EFF(12),t.k0s()(),t.j41(13,"p",16)(14,"span",15),t.EFF(15),t.k0s()()()),2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(4),t.JRh(null==e?null:e.parsed_attendance_date),t.R7$(4),t.JRh(n.convertToBangladeshTime(null==e?null:e.sign_in_time_bd)),t.R7$(4),t.JRh(n.convertToBangladeshTime(null==e?null:e.sign_out_time_bd)),t.R7$(3),t.JRh(n.getTotalTime(e))}}function j(i,d){if(1&i){const e=t.RV6();t.j41(0,"li",13)(1,"div")(2,"p",17),t.EFF(3,"Name: "),t.j41(4,"span",15),t.EFF(5),t.k0s()(),t.j41(6,"p",17),t.EFF(7,"Date: "),t.j41(8,"span",15),t.EFF(9),t.k0s()()(),t.j41(10,"p",16),t.EFF(11,"Sign In: "),t.j41(12,"span",15),t.EFF(13),t.k0s()(),t.j41(14,"p",16),t.EFF(15,"Sign Out: "),t.j41(16,"span",15),t.EFF(17),t.k0s()(),t.j41(18,"div",18)(19,"p",19)(20,"span",15),t.EFF(21),t.k0s()(),t.j41(22,"div",20)(23,"div",21)(24,"button",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.handleAction("view",a))}),t.qSk(),t.j41(25,"svg",23),t.nrm(26,"path",24)(27,"path",25),t.k0s()(),t.joV(),t.j41(28,"button",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.handleAction("edit",a))}),t.qSk(),t.j41(29,"svg",23),t.nrm(30,"path",26),t.k0s()()()()()()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(5),t.JRh(null==e?null:e.employee_name),t.R7$(4),t.JRh(null==e?null:e.parsed_attendance_date),t.R7$(4),t.JRh(n.convertToBangladeshTime(null==e?null:e.sign_in_time_bd)),t.R7$(4),t.JRh(n.convertToBangladeshTime(null==e?null:e.sign_out_time_bd)),t.R7$(2),t.Y8G("ngClass",n.getTotalTimeClass(e)),t.R7$(2),t.JRh(n.getTotalTime(e))}}function z(i,d){if(1&i&&(t.qex(0),t.DNE(1,F,16,4,"li",12),t.DNE(2,j,31,6,"li",12),t.bVm()),2&i){const e=t.XpG(3);t.R7$(1),t.Y8G("ngIf",!e.isEmployeeAttendance),t.R7$(1),t.Y8G("ngIf",e.isEmployeeAttendance)}}function b(i,d){if(1&i&&(t.j41(0,"ul",10),t.DNE(1,z,3,2,"ng-container",11),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.data)}}function I(i,d){1&i&&(t.j41(0,"div",27),t.nrm(1,"img",28),t.j41(2,"h2",29),t.EFF(3,"No Data Found"),t.k0s(),t.j41(4,"p",30),t.EFF(5,"Try refining your search or adding new data."),t.k0s()())}function w(i,d){if(1&i&&t.EFF(0),2&i){const e=d.range;t.E5c(" ",e[0]," - ",e[1]," of ",d.$implicit," items ")}}function A(i,d){if(1&i){const e=t.RV6();t.j41(0,"div",3),t.DNE(1,b,2,1,"ul",4),t.DNE(2,I,6,0,"div",5),t.j41(3,"div",6)(4,"div",7)(5,"nz-pagination",8),t.bIt("nzPageIndexChange",function(a){t.eBV(e);const s=t.XpG();return t.Njj(s.currentIndex=a)})("nzPageSizeChange",function(a){t.eBV(e);const s=t.XpG();return t.Njj(s.pageSize=a)})("nzPageIndexChange",function(a){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageIndexChange(a))})("nzPageSizeChange",function(a){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageSizeChange(a))}),t.k0s(),t.DNE(6,w,1,3,"ng-template",null,9,t.C5r),t.k0s()()()}if(2&i){const e=t.sdS(7),n=t.XpG();t.R7$(1),t.Y8G("ngIf",n.data.length),t.R7$(1),t.Y8G("ngIf",!n.data.length),t.R7$(3),t.Y8G("nzPageIndex",n.currentIndex)("nzPageSize",n.pageSize)("nzShowSizeChanger",!0)("nzShowTotal",e)("nzTotal",n.totalCount)}}let S=(()=>{class i{constructor(){this.isEmployeeAttendance=!1,this.data=[],this.actionEmitter=new t.bkB,this.paginationEvent=new t.bkB,this.loading=!1,this.totalCount=0,this.currentIndex=1,this.offset=0,this.pageSize=u.YM.PAGE_SIZE}onPageIndexChange(e){this.currentIndex=e,this.offset=(e-1)*this.pageSize,this.paginationEvent.emit({offset:this.offset,limit:this.pageSize})}onPageSizeChange(e){this.pageSize=e,this.currentIndex=1,this.offset=0,this.paginationEvent.emit({offset:this.offset,limit:this.pageSize})}handleAddCategory(){this.actionEmitter.emit({action:"create",value:null})}handleAction(e,n){this.actionEmitter.emit({action:e,value:n})}convertToBangladeshTime(e){if(e){const n=new Date(e);return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Dhaka"}).format(n)}return null}getTotalTime(e){if(!e?.attendance_date)return"Invalid data.";const n=new Date,a=new Date(e.attendance_date),s=a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate(),r=e?.sign_in_time_bd?new Date(e.sign_in_time_bd):null,v=e?.sign_out_time_bd?new Date(e.sign_out_time_bd):null;if(!r)return s?"Not signed in yet.":"Absent";if(r&&!v)return s?"Currently signed in.":"Missed signing out.";if(r&&v){const y=v.getTime()-r.getTime();return y<=0?"Invalid time range.":`Total Time: ${Math.floor(y/36e5)}h ${Math.floor(y%36e5/6e4)}m`}return"Invalid data."}getTotalTimeClass(e){switch(this.getTotalTime(e)){case"Absent":case"Missed signing out.":return"text-red-500";case"Not signed in yet.":return"text-yellow-500";case"Currently signed in.":return"text-green-500";default:return"text-gray-500"}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-view-employee-attendance-list"]],inputs:{isEmployeeAttendance:"isEmployeeAttendance",data:"data",loading:"loading",totalCount:"totalCount"},outputs:{actionEmitter:"actionEmitter",paginationEvent:"paginationEvent"},standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[3,"isVisible",4,"ngIf"],["class","p-4 border rounded-md",4,"ngIf"],[3,"isVisible"],[1,"p-4","border","rounded-md"],["class","divide-y divide-gray-100",4,"ngIf"],["class","flex flex-col items-center justify-center h-full text-center bg-gray-50 p-8 rounded-md space-y-4",4,"ngIf"],[1,"bg-white","grid","grid-cols-1","h-16"],[1,"flex","items-center","justify-end","mr-6"],[3,"nzPageIndex","nzPageSize","nzShowSizeChanger","nzShowTotal","nzTotal","nzPageIndexChange","nzPageSizeChange"],["rangeTemplate",""],[1,"divide-y","divide-gray-100"],[4,"ngFor","ngForOf"],["class","grid md:grid-cols-4 gap-x-6 py-5",4,"ngIf"],[1,"grid","md:grid-cols-4","gap-x-6","py-5"],[1,"text-sm/6","text-[#180B26]","font-semibold"],[1,"font-normal"],[1,"mt-1","text-xs/5","text-gray-500","font-semibold"],[1,"mt-1","truncate","text-xs/5","text-[#180B26]","font-semibold"],[1,"flex","justify-between"],[1,"mt-1","text-xs/5","text-gray-500","font-semibold",3,"ngClass"],[1,"shrink-0","sm:flex","sm:flex-col","sm:items-center"],[1,"mt-1","text-xs/5","text-black","flex","justify-center","items-center","gap-4"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","bg-gray-50","p-8","rounded-md","space-y-4"],["src","assets/icons/no_data.svg","alt","No Data Found"],[1,"text-lg","font-semibold","text-black"],[1,"text-black"]],template:function(n,a){1&n&&(t.DNE(0,T,1,1,"app-loader",0),t.DNE(1,A,8,7,"div",1)),2&n&&(t.Y8G("ngIf",a.loading),t.R7$(1),t.Y8G("ngIf",!a.loading))},dependencies:[c.MD,c.YU,c.Sq,c.bT,m.Z,x.ae,f.V]})}}return i})();var D=o(5816),V=o(6504),E=o(4710),L=o(8960);let P=(()=>{class i{constructor(e,n,a,s,r){this._httpService=e,this._destroyRef=n,this._notificationService=a,this._router=s,this._activatedRoute=r,this.data=[],this.totalCount=0,this.loading=!1,this.payload={offset:0,limit:u.YM.PAGE_SIZE,search_text:"",month:""},this.isFilter=!1,this.dateControl=new l.MJ("")}ngOnInit(){this.setCurrentMonth(),this.loadList(),this.dateControl.valueChanges.subscribe(e=>{this.onDateChange(e)})}setCurrentMonth(){const e=new Date;this.payload.month=e.toISOString().slice(0,7),this.dateControl.setValue(e.toISOString().slice(0,7))}onDateChange(e){if(e){const n=new Date(e);this.payload.month=n.toISOString().slice(0,7),this.isFilter=!0,this.loadList()}else this._notificationService.warning("Warning!","Please Select A Month!")}handlePaginationEvent(e){this.payload={...this.payload,offset:e.offset,limit:e.limit},this.loadList()}loadList(){this.isFilter||(this.loading=!0),this._httpService.get(p.A.GET_EMPLOYEE_ATTENDANCE_LIST,this.payload).pipe((0,h.pQ)(this._destroyRef),(0,_.j)(()=>this.loading=!1)).subscribe({next:e=>{200===e.status&&(this.data=[],e.body?.data?.length?(this.data=e.body.data,this.totalCount=e.body.total):this.data=[],console.log(this.data))},error:e=>{console.log(e),this._notificationService.error("Error!",e?.error?.message)}})}handleListActions(e){"create"===e.action?this.handleAdd():"view"===e.action?this.handleView(e.value.oid):"edit"===e.action&&this.handleEdit(e.value.oid)}handleAdd(){this._router.navigate(["../create-attendance"],{relativeTo:this._activatedRoute})}handleView(e){this._router.navigate([`../view-attendance-details/${e}`],{relativeTo:this._activatedRoute,state:{edit:!1}})}handleEdit(e){this._router.navigate([`../view-attendance-details/${e}`],{relativeTo:this._activatedRoute,state:{edit:!0}})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(D.k),t.rXU(t.abz),t.rXU(V.xY),t.rXU(E.Ix),t.rXU(E.nX))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-display-employee-attendance-list"]],standalone:!0,features:[t.aNF],decls:8,vars:5,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[1,"md:flex","justify-between","items-center","mb-4"],[1,"md:w-2/3","grid","lg:grid-cols-3"],["nzInputReadOnly","","nzMode","month",3,"formControl"],[3,"isEmployeeAttendance","loading","data","totalCount","actionEmitter","paginationEvent"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Employee Attendance List"),t.k0s(),t.j41(3,"div")(4,"div",2)(5,"div",3),t.nrm(6,"nz-date-picker",4),t.k0s()(),t.j41(7,"app-view-employee-attendance-list",5),t.bIt("actionEmitter",function(r){return a.handleListActions(r)})("paginationEvent",function(r){return a.handlePaginationEvent(r)}),t.k0s()()()),2&n&&(t.R7$(6),t.Y8G("formControl",a.dateControl),t.R7$(1),t.Y8G("isEmployeeAttendance",!0)("loading",a.loading)("data",a.data)("totalCount",a.totalCount))},dependencies:[c.MD,m.Z,L.SN,l.X1,l.BC,l.l_,S]})}}return i})()},765:(C,g,o)=>{o.d(g,{V:()=>h});var c=o(177),l=o(7705);function m(p,u){1&p&&(l.j41(0,"div",1),l.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),l.k0s())}let h=(()=>{class p{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(t){return new(t||p)}}static{this.\u0275cmp=l.VBU({type:p,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[l.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(t,f){1&t&&l.DNE(0,m,6,0,"div",0),2&t&&l.Y8G("ngIf",f.isVisible)},dependencies:[c.MD,c.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return p})()}}]);