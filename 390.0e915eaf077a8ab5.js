"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[390],{4958:(g,v,t)=>{t.d(v,{V:()=>i});const i={MEASUREMENT_UNITS:[{label:"Kilogram (kg)",value:"kg"},{label:"Liter (L)",value:"l"},{label:"Piece (pcs)",value:"pcs"},{label:"Meter (m)",value:"m"},{label:"Box (box)",value:"box"},{label:"Pack (pack)",value:"pack"},{label:"Dozen (doz)",value:"doz"},{label:"Gram (g)",value:"g"},{label:"Ton (t)",value:"t"},{label:"Barrel (bbl)",value:"bbl"}],PRODUCT_NATURE:[{label:"For Sale",value:"for_sale"},{label:"For Office Use",value:"for_office_use"},{label:"For Delivery",value:"for_delivery"},{label:"For Packaging",value:"for_packaging"},{label:"For Storage",value:"for_storage"},{label:"For Maintenance",value:"for_maintenance"},{label:"For Personal Use",value:"for_personal_use"},{label:"For Promotion",value:"for_promotion"}],NATURE_OF_ASSET:[{label:"Tangible",value:"tangible"},{label:"Consumable",value:"consumable"},{label:"Fixed Asset",value:"fixed_asset"},{label:"Current Asset",value:"current_asset"},{label:"Intangible Asset",value:"intangible_asset"},{label:"Inventory",value:"inventory"},{label:"Depreciable",value:"depreciable"},{label:"Non-depreciable",value:"non_depreciable"}],SOURCE_TYPES:[{label:"Supplier",value:"supplier"},{label:"Dealer",value:"dealer"}],STORAGE_TYPES:[{label:"Pallet Storage",value:"pallet"},{label:"Shelf Storage",value:"shelf"},{label:"Bin Storage",value:"bin"},{label:"Bulk Storage",value:"bulk"},{label:"Cold Storage",value:"cold"},{label:"Rack Storage",value:"rack"},{label:"Drive-In Rack Storage",value:"drive_in_rack"},{label:"Drawer Storage",value:"drawer"},{label:"Secure Vaults",value:"secure_vaults"}],PURCHASE_TYPES:[{label:"Instant",value:"instant"},{label:"Advance",value:"advance"},{label:"Overseas",value:"overseas"}],PAYMENT_STATUS:[{label:"Paid",value:"paid"},{label:"Partially Paid",value:"partially_paid"},{label:"Unpaid",value:"unpaid"}],INTENDED_USE_OPTIONS:[{label:"For Sale",value:"for_sale"},{label:"For Internal Use",value:"for_internal_use"}],MONTHS:[{label:"January",value:"january"},{label:"February",value:"february"},{label:"March",value:"march"},{label:"April",value:"april"},{label:"May",value:"may"},{label:"June",value:"june"},{label:"July",value:"july"},{label:"August",value:"august"},{label:"September",value:"september"},{label:"October",value:"october"},{label:"November",value:"november"},{label:"December",value:"december"}],PRODUCT_RETURN_REASONS:[{label:"Item is broken or cracked",value:"broken"},{label:"Damaged product (before use)",value:"damaged_before_use"},{label:"Stopped working after short use",value:"damaged_after_use"},{label:"Wrong size or fit",value:"wrong_size"},{label:"Wrong product given",value:"wrong_product"},{label:"Product quality not satisfactory",value:"poor_quality"},{label:"Customer didn\u2019t like the product",value:"not_liked"},{label:"Product differs from description",value:"not_as_expected"},{label:"Duplicate item purchased",value:"duplicate_purchase"},{label:"Item was part of an exchange",value:"exchange"},{label:"Other (please specify)",value:"other"}],DISPOSAL_REASONS:[{label:"Expired",value:"expired"},{label:"Damaged in store",value:"damaged"},{label:"Customer Return - Unsellable",value:"customer_unsellable"},{label:"Opened Packaging",value:"opened"},{label:"Others",value:"others"}]}},3040:(g,v,t)=>{t.d(v,{N4:()=>a,op:()=>h});var i=t(9417);function a(o){Object.values(o.controls).forEach(l=>{l.invalid&&(l.markAsDirty(),l.updateValueAndValidity({onlySelf:!0})),l instanceof i.gE&&Object.values(l.controls).forEach(d=>{d.invalid&&(d.markAsDirty(),d.updateValueAndValidity({onlySelf:!0}))}),l instanceof i.Yp&&Object.values(l.controls).forEach(d=>{d instanceof i.gE&&Object.values(d.controls).forEach(c=>{c.invalid&&(c.markAsDirty(),c.updateValueAndValidity({onlySelf:!0}))})})})}function h(o){if(o.validator){const l=o.validator({});return l&&l.required}return!1}},390:(g,v,t)=>{t.r(v),t.d(v,{CreateProductDisposeComponent:()=>M});var i=t(177),a=t(9079),h=t(4774),p=t(980),e=t(7705),s=t(9417),o=t(353),l=t(9475),d=t(7109),c=t(4958),r=t(3040),f=t(4177),y=t(6475),E=t(5816),R=t(7529),D=t(8927),z=t(1011),S=t(1997),C=t(2047);function F(b,P){if(1&b&&(e.qex(0),e.nrm(1,"nz-option",18),e.bVm()),2&b){const n=P.$implicit;e.R7$(1),e.Y8G("nzLabel",n.label)("nzValue",n.product_oid)}}function O(b,P){if(1&b&&(e.qex(0),e.nrm(1,"nz-option",18),e.bVm()),2&b){const n=P.$implicit;e.R7$(1),e.Y8G("nzLabel",n.label)("nzValue",n.value)}}let T=(()=>{class b{constructor(n,u,m,_){this._fb=n,this._modal=u,this._httpService=m,this._destroyRef=_,this.actionEmitter=new e.bkB,this.loading=!1,this.productList=[],this.disposeReasons=c.V.DISPOSAL_REASONS,this.selectedProduct=null}ngOnInit(){this.form=this.createForm(),this.loadProductList(),this.formData&&this.form.patchValue(this.formData),this.form.get("product_oid")?.valueChanges.pipe((0,a.pQ)(this._destroyRef)).subscribe(n=>{this.selectedProduct=this.productList.find(u=>u.product_oid===n),console.log("Selected Product:",this.selectedProduct),this.selectedProduct&&this.form.patchValue({available_quantity:this.selectedProduct.quantity_available,inventory_oid:this.selectedProduct.inventory_oid})})}createForm(){return this._fb.group({oid:[null],product_oid:[null,[s.k0.required]],inventory_oid:[null,[s.k0.required]],available_quantity:[{value:0,disabled:!0}],dispose_quantity:[null,[s.k0.required,s.k0.min(1)]],reason:[null,[s.k0.required]],notes:[null]})}handleConfirm(){let n="Do you want to create this product disposal?";this.formData&&(n="Are you sure you want to save this product disposal?"),this._modal.create({nzContent:f.M,nzData:{message:n},nzFooter:null,nzClosable:!1,nzOnOk:()=>this.actionEmitter.emit({action:"submit",value:this.form.value})})}handleForm(){this.form.valid?this.handleConfirm():(0,r.N4)(this.form)}goBack(){this.actionEmitter.emit({action:"back",value:this.form.value})}hasRequiredValidator(n){const u=this.form.get(n);return!!u&&(0,r.op)(u)}loadProductList(){this._httpService.get(h.A.GET_PRODUCT_LIST_FOR_DISPOSE_DROPDOWN).pipe((0,a.pQ)(this._destroyRef)).subscribe({next:n=>{this.productList=n?.body?.data,console.log("Product List:",this.productList)},error:n=>{console.error(n)}})}static{this.\u0275fac=function(u){return new(u||b)(e.rXU(s.ok),e.rXU(y.N_),e.rXU(E.k),e.rXU(e.abz))}}static{this.\u0275cmp=e.VBU({type:b,selectors:[["product-dispose-form"]],inputs:{formData:"formData",loading:"loading"},outputs:{actionEmitter:"actionEmitter"},standalone:!0,features:[e.aNF],decls:34,vars:15,consts:[[1,"rounded-md","bg-white"],["nz-form","",3,"formGroup","nzLayout","ngSubmit"],[1,"grid","grid-cols-1","md:gap-x-6","md:grid-cols-2","lg:grid-cols-3","border-[0.5px]","p-4","rounded-md"],[3,"nzRequired"],["nzErrorTip","Product is required."],["formControlName","product_oid","nz-input","","nzAllowClear","","nzPlaceHolder","Select Product",1,"w-full"],[4,"ngFor","ngForOf"],["nzErrorTip","Quantity is Required."],["formControlName","available_quantity","nz-input","","placeholder","Enter Quantity"],["formControlName","dispose_quantity","nzPlaceHolder","Enter Dispose Quantity",1,"w-full",3,"nzMin","nzMax"],["nzErrorTip","Reason For Disposal is required."],["formControlName","reason","nz-input","","nzAllowClear","","nzPlaceHolder","Select Reason For Disposal",1,"w-full"],["nzErrorTip","Special Notes is Required."],["rows","2","formControlName","notes","nz-input","","placeholder","Special Note (if any)","nzAutosize",""],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"],[3,"label","loading","type"],[3,"nzLabel","nzValue"]],template:function(u,m){1&u&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return m.handleForm()}),e.j41(2,"div",2)(3,"nz-form-item")(4,"nz-form-label",3),e.EFF(5,"Product"),e.k0s(),e.j41(6,"nz-form-control",4)(7,"nz-select",5),e.DNE(8,F,2,2,"ng-container",6),e.k0s()()(),e.j41(9,"nz-form-item")(10,"nz-form-label",3),e.EFF(11,"Available Quantity"),e.k0s(),e.j41(12,"nz-form-control",7),e.nrm(13,"input",8),e.k0s()(),e.j41(14,"nz-form-item")(15,"nz-form-label",3),e.EFF(16,"Dispose Quantity"),e.k0s(),e.j41(17,"nz-form-control"),e.nrm(18,"nz-input-number",9),e.k0s()(),e.j41(19,"nz-form-item")(20,"nz-form-label",3),e.EFF(21,"Reason For Disposal"),e.k0s(),e.j41(22,"nz-form-control",10)(23,"nz-select",11),e.DNE(24,O,2,2,"ng-container",6),e.k0s()()(),e.j41(25,"nz-form-item")(26,"nz-form-label",3),e.EFF(27,"Special Notes"),e.k0s(),e.j41(28,"nz-form-control",12),e.nrm(29,"textarea",13),e.k0s()()(),e.j41(30,"div",14)(31,"div",15)(32,"secondary-button",16),e.bIt("click",function(){return m.goBack()}),e.k0s(),e.nrm(33,"primary-button",17),e.k0s()()()()),2&u&&(e.R7$(1),e.Y8G("formGroup",m.form)("nzLayout","vertical"),e.R7$(3),e.Y8G("nzRequired",m.hasRequiredValidator("product_oid")),e.R7$(4),e.Y8G("ngForOf",m.productList),e.R7$(2),e.Y8G("nzRequired",m.hasRequiredValidator("available_quantity")),e.R7$(5),e.Y8G("nzRequired",m.hasRequiredValidator("dispose_quantity")),e.R7$(3),e.Y8G("nzMin",1)("nzMax",null==m.selectedProduct?null:m.selectedProduct.quantity_available),e.R7$(2),e.Y8G("nzRequired",m.hasRequiredValidator("reason")),e.R7$(4),e.Y8G("ngForOf",m.disposeReasons),e.R7$(2),e.Y8G("nzRequired",m.hasRequiredValidator("notes")),e.R7$(6),e.Y8G("label","Cancel"),e.R7$(1),e.Y8G("label","Submit")("loading",m.loading)("type","submit"))},dependencies:[i.MD,i.Sq,d.Z,R.Uq,R.e,D.CA,D.Ls,D.Mo,D.zS,z.Sy,z.c9,S.ld,S.WI,C.FG,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,o.j,l.t]})}}return b})();var A=t(6504);let M=(()=>{class b{constructor(n,u,m,_){this._httpService=n,this._destroyRef=u,this._location=m,this._notificationService=_,this.loading=!1}handleActions(n){"submit"===n.action?this.handleCreate(n.value):"back"===n.action&&this._location.back()}handleCreate(n){this.loading=!0,this._httpService.post(h.A.CREATE_PRODUCT_DISPOSE,n).pipe((0,a.pQ)(this._destroyRef),(0,p.j)(()=>this.loading=!1)).subscribe({next:u=>{this._notificationService.success("Success!",u?.body?.message),this._location.back()},error:u=>{console.log(u),this._notificationService.error("Error!",u?.error?.message)}})}static{this.\u0275fac=function(u){return new(u||b)(e.rXU(E.k),e.rXU(e.abz),e.rXU(i.aZ),e.rXU(A.xY))}}static{this.\u0275cmp=e.VBU({type:b,selectors:[["create-product-dispose"]],standalone:!0,features:[e.aNF],decls:4,vars:1,consts:[[1,"p-4"],[1,"text-2xl","font-medium","mb-4","animate-text"],[3,"loading","actionEmitter"]],template:function(u,m){1&u&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Create New Product Dispose"),e.k0s(),e.j41(3,"product-dispose-form",2),e.bIt("actionEmitter",function(U){return m.handleActions(U)}),e.k0s()()),2&u&&(e.R7$(3),e.Y8G("loading",m.loading))},dependencies:[i.MD,T]})}}return b})()},353:(g,v,t)=>{t.d(v,{j:()=>o});var i=t(177),a=t(7705);let h=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=a.VBU({type:l,selectors:[["app-spinner"]],standalone:!0,features:[a.aNF],decls:3,vars:0,consts:[["fill","none","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"-ml-1","mr-3","h-5","w-5","animate-spin","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z","fill","currentColor",1,"opacity-75"]],template:function(r,f){1&r&&(a.qSk(),a.j41(0,"svg",0),a.nrm(1,"circle",1)(2,"path",2),a.k0s())},dependencies:[i.MD]})}}return l})();var p=t(7002);function e(l,d){1&l&&(a.j41(0,"span"),a.nrm(1,"app-spinner"),a.k0s())}function s(l,d){if(1&l&&(a.j41(0,"span",4),a.EFF(1),a.k0s()),2&l){const c=a.XpG();a.R7$(1),a.SpI(" ",c.label," ")}}let o=(()=>{class l{constructor(){this.type="button",this.loading=!1}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=a.VBU({type:l,selectors:[["primary-button"]],inputs:{label:"label",type:"type",loading:"loading"},standalone:!0,features:[a.aNF],decls:4,vars:5,consts:[["disableForGuest","",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-not-allowed",3,"disabled","type"],[1,"absolute","inset-0","w-2","bg-primary","transition-all","duration-300","ease-in-out","group-hover:w-full",3,"ngClass"],[4,"ngIf"],["class","relative z-10 whitespace-nowrap text-black transition-all duration-300 group-hover:text-white",4,"ngIf"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(r,f){1&r&&(a.j41(0,"button",0),a.nrm(1,"div",1),a.DNE(2,e,2,0,"span",2),a.DNE(3,s,2,1,"span",3),a.k0s()),2&r&&(a.Y8G("disabled",f.loading)("type",f.type),a.R7$(1),a.Y8G("ngClass",f.loading?"w-full":""),a.R7$(1),a.Y8G("ngIf",f.loading),a.R7$(1),a.Y8G("ngIf",!f.loading))},dependencies:[i.MD,i.YU,i.bT,h,p.x]})}}return l})()},9475:(g,v,t)=>{t.d(v,{t:()=>h});var i=t(177),a=t(7705);let h=(()=>{class p{constructor(){this.type="button"}static{this.\u0275fac=function(o){return new(o||p)}}static{this.\u0275cmp=a.VBU({type:p,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[a.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(o,l){1&o&&(a.j41(0,"button",0),a.nrm(1,"div",1),a.j41(2,"span",2),a.EFF(3),a.k0s()()),2&o&&(a.R7$(3),a.SpI(" ",l.label," "))},dependencies:[i.MD]})}}return p})()},4177:(g,v,t)=>{t.d(v,{M:()=>l});var i=t(177),a=t(7109),h=t(5088),p=t(6475),e=t(353),s=t(9475),o=t(7705);let l=(()=>{class d{constructor(r,f){this.modalData=r,this._modalRef=f}handleConfirm(){this._modalRef.triggerOk()}closeModal(){this._modalRef.triggerCancel()}static{this.\u0275fac=function(f){return new(f||d)(o.rXU(p.or),o.rXU(p.J9))}}static{this.\u0275cmp=o.VBU({type:d,selectors:[["app-confirmation-modal"]],standalone:!0,features:[o.aNF],decls:7,vars:5,consts:[[1,"w-full","flex","flex-col","items-center","p-5"],["src","assets/icons/undraw_confirmation.svg","alt","",1,"w-2/3","mx-auto"],[1,"text-black","mt-6","mb-9","font-semibold","text-lg"],[1,"flex","items-center","gap-8"],[3,"label","type","click"]],template:function(f,y){1&f&&(o.j41(0,"div",0),o.nrm(1,"img",1),o.j41(2,"p",2),o.EFF(3),o.k0s(),o.j41(4,"div",3)(5,"secondary-button",4),o.bIt("click",function(){return y.closeModal()}),o.k0s(),o.j41(6,"primary-button",4),o.bIt("click",function(){return y.handleConfirm()}),o.k0s()()()),2&f&&(o.R7$(3),o.JRh(y.modalData.message),o.R7$(2),o.Y8G("label","Cancel")("type","button"),o.R7$(1),o.Y8G("label","Confirm")("type","button"))},dependencies:[i.MD,a.Z,h.iu,e.j,s.t]})}}return d})()},7002:(g,v,t)=>{t.d(v,{x:()=>h});var i=t(7705),a=t(3769);let h=(()=>{class p{constructor(s,o,l){this.el=s,this.renderer=o,this.authService=l}ngOnInit(){this.authService.getGuestUserStatus()&&this.renderer.setAttribute(this.el.nativeElement,"disabled","true")}static{this.\u0275fac=function(o){return new(o||p)(i.rXU(i.aKT),i.rXU(i.sFG),i.rXU(a.u))}}static{this.\u0275dir=i.FsC({type:p,selectors:[["","disableForGuest",""]],standalone:!0})}}return p})()}}]);