"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[2319],{4958:(E,_,a)=>{a.d(_,{V:()=>i});const i={MEASUREMENT_UNITS:[{label:"Kilogram (kg)",value:"kg"},{label:"Liter (L)",value:"l"},{label:"Piece (pcs)",value:"pcs"},{label:"Meter (m)",value:"m"},{label:"Box (box)",value:"box"},{label:"Pack (pack)",value:"pack"},{label:"Dozen (doz)",value:"doz"},{label:"Gram (g)",value:"g"},{label:"Ton (t)",value:"t"},{label:"Barrel (bbl)",value:"bbl"}],PRODUCT_NATURE:[{label:"For Sale",value:"for_sale"},{label:"For Office Use",value:"for_office_use"},{label:"For Delivery",value:"for_delivery"},{label:"For Packaging",value:"for_packaging"},{label:"For Storage",value:"for_storage"},{label:"For Maintenance",value:"for_maintenance"},{label:"For Personal Use",value:"for_personal_use"},{label:"For Promotion",value:"for_promotion"}],NATURE_OF_ASSET:[{label:"Tangible",value:"tangible"},{label:"Consumable",value:"consumable"},{label:"Fixed Asset",value:"fixed_asset"},{label:"Current Asset",value:"current_asset"},{label:"Intangible Asset",value:"intangible_asset"},{label:"Inventory",value:"inventory"},{label:"Depreciable",value:"depreciable"},{label:"Non-depreciable",value:"non_depreciable"}],SOURCE_TYPES:[{label:"Supplier",value:"supplier"},{label:"Dealer",value:"dealer"}],STORAGE_TYPES:[{label:"Pallet Storage",value:"pallet"},{label:"Shelf Storage",value:"shelf"},{label:"Bin Storage",value:"bin"},{label:"Bulk Storage",value:"bulk"},{label:"Cold Storage",value:"cold"},{label:"Rack Storage",value:"rack"},{label:"Drive-In Rack Storage",value:"drive_in_rack"},{label:"Drawer Storage",value:"drawer"},{label:"Secure Vaults",value:"secure_vaults"}],PURCHASE_TYPES:[{label:"Instant",value:"instant"},{label:"Advance",value:"advance"},{label:"Overseas",value:"overseas"}],PAYMENT_STATUS:[{label:"Paid",value:"paid"},{label:"Partially Paid",value:"partially_paid"},{label:"Unpaid",value:"unpaid"}],INTENDED_USE_OPTIONS:[{label:"For Sale",value:"for_sale"},{label:"For Internal Use",value:"for_internal_use"}],MONTHS:[{label:"January",value:"january"},{label:"February",value:"february"},{label:"March",value:"march"},{label:"April",value:"april"},{label:"May",value:"may"},{label:"June",value:"june"},{label:"July",value:"july"},{label:"August",value:"august"},{label:"September",value:"september"},{label:"October",value:"october"},{label:"November",value:"november"},{label:"December",value:"december"}],PRODUCT_RETURN_REASONS:[{label:"Item is broken or cracked",value:"broken"},{label:"Damaged product (before use)",value:"damaged_before_use"},{label:"Stopped working after short use",value:"damaged_after_use"},{label:"Wrong size or fit",value:"wrong_size"},{label:"Wrong product given",value:"wrong_product"},{label:"Product quality not satisfactory",value:"poor_quality"},{label:"Customer didn\u2019t like the product",value:"not_liked"},{label:"Product differs from description",value:"not_as_expected"},{label:"Duplicate item purchased",value:"duplicate_purchase"},{label:"Item was part of an exchange",value:"exchange"},{label:"Other (please specify)",value:"other"}],DISPOSAL_REASONS:[{label:"Expired",value:"expired"},{label:"Damaged in store",value:"damaged"},{label:"Customer Return - Unsellable",value:"customer_unsellable"},{label:"Opened Packaging",value:"opened"},{label:"Others",value:"others"}]}},2319:(E,_,a)=>{a.r(_),a.d(_,{ViewProductReturnDetailsForManagerComponent:()=>N});var i=a(177),r=a(9475),g=a(765),d=a(7109),p=a(5720),f=a(8018),u=a(9079),v=a(4774),R=a(4958),h=a(6354),P=a(980),e=a(7705),T=a(5816),F=a(6504),D=a(4710),M=a(5703),b=a(934),O=a(1672);function I(n,c){if(1&n&&e.nrm(0,"app-loader",6),2&n){const t=e.XpG();e.Y8G("isVisible",t.loading)}}function y(n,c){if(1&n&&(e.j41(0,"p",22),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI("Total: ",e.brH(2,1,t.returnDetails.sales_total,"\u09f3","symbol")," ")}}function x(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",23)(1,"p"),e.EFF(2,"Sales Information"),e.k0s(),e.j41(3,"img",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.redirectToSale())}),e.k0s()()}}function C(n,c){if(1&n&&(e.j41(0,"p",22),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.SpI("Refunded: ",e.brH(2,1,t.returnDetails.refund_amount,"\u09f3","symbol")," ")}}function S(n,c){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"safeText"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"safeText"),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"safeText"),e.k0s(),e.j41(10,"td",25),e.bIt("click",function(){const l=e.eBV(t).$implicit,m=e.XpG(3);return e.Njj(m.redirectToSupplier(l))}),e.EFF(11),e.nI1(12,"safeText"),e.k0s()()}if(2&n){const t=c.$implicit;e.R7$(2),e.JRh(e.bMT(3,4,t.product_name)),e.R7$(3),e.JRh(e.bMT(6,6,t.return_quantity)),e.R7$(3),e.JRh(e.bMT(9,8,t.batch_code)),e.R7$(3),e.JRh(e.bMT(12,10,t.supplier))}}function k(n,c){if(1&n){const t=e.RV6();e.j41(0,"div",8)(1,"nz-card",9)(2,"div",10)(3,"div",11)(4,"p"),e.EFF(5,"Invoice No"),e.k0s(),e.j41(6,"p",12),e.EFF(7),e.nI1(8,"safeText"),e.k0s()(),e.j41(9,"div",11)(10,"p"),e.EFF(11,"Customer Name"),e.k0s(),e.j41(12,"p",12),e.EFF(13),e.nI1(14,"safeText"),e.k0s()(),e.j41(15,"div",11)(16,"p"),e.EFF(17,"Customer Phone"),e.k0s(),e.j41(18,"p",12),e.EFF(19),e.nI1(20,"safeText"),e.k0s()(),e.j41(21,"div",11)(22,"p"),e.EFF(23,"Date Of Sale"),e.k0s(),e.j41(24,"p",12),e.EFF(25),e.nI1(26,"safeText"),e.k0s()(),e.j41(27,"div",11)(28,"p"),e.EFF(29,"Sold By"),e.k0s(),e.j41(30,"p",12),e.EFF(31),e.nI1(32,"safeText"),e.k0s()()(),e.DNE(33,y,3,5,"ng-template",null,13,e.C5r),e.DNE(35,x,4,0,"ng-template",null,14,e.C5r),e.k0s(),e.j41(37,"nz-card",15)(38,"div",10)(39,"div",11)(40,"p"),e.EFF(41,"Return Reason"),e.k0s(),e.j41(42,"p",12),e.EFF(43),e.nI1(44,"safeText"),e.k0s()(),e.j41(45,"div",11)(46,"p"),e.EFF(47,"Return Issued On"),e.k0s(),e.j41(48,"p",12),e.EFF(49),e.nI1(50,"safeText"),e.k0s()(),e.j41(51,"div",11)(52,"p"),e.EFF(53,"Return Issued By"),e.k0s(),e.j41(54,"p",12),e.EFF(55),e.nI1(56,"safeText"),e.k0s()()(),e.DNE(57,C,3,5,"ng-template",null,16,e.C5r),e.k0s(),e.j41(59,"nz-table",17)(60,"thead")(61,"tr")(62,"th"),e.EFF(63),e.nI1(64,"translate"),e.k0s(),e.j41(65,"th"),e.EFF(66),e.nI1(67,"translate"),e.k0s(),e.j41(68,"th"),e.EFF(69),e.nI1(70,"translate"),e.k0s(),e.j41(71,"th"),e.EFF(72),e.nI1(73,"translate"),e.k0s()()(),e.j41(74,"tbody"),e.DNE(75,S,13,12,"tr",18),e.k0s()(),e.j41(76,"div",19)(77,"div",20)(78,"secondary-button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.goBack())}),e.k0s()()()()}if(2&n){const t=e.sdS(34),s=e.sdS(36),o=e.sdS(58),l=e.XpG(2),m=e.sdS(7);e.R7$(1),e.Y8G("nzTitle",s)("nzExtra",t),e.R7$(6),e.SpI("",e.bMT(8,21,null==l.returnDetails?null:l.returnDetails.invoice_no)," "),e.R7$(6),e.JRh(e.bMT(14,23,null==l.returnDetails?null:l.returnDetails.customer_name)),e.R7$(6),e.JRh(e.bMT(20,25,null==l.returnDetails?null:l.returnDetails.customer_phone)),e.R7$(6),e.SpI("",e.bMT(26,27,null==l.returnDetails?null:l.returnDetails.sales_date)," "),e.R7$(6),e.JRh(e.bMT(32,29,null==l.returnDetails?null:l.returnDetails.sold_by)),e.R7$(6),e.Y8G("nzExtra",o),e.R7$(6),e.SpI("",e.bMT(44,31,l.getReturnReasonLabel(null==l.returnDetails?null:l.returnDetails.return_reason))," "),e.R7$(6),e.SpI("",e.bMT(50,33,null==l.returnDetails?null:l.returnDetails.created_on)," "),e.R7$(6),e.SpI("",e.bMT(56,35,null==l.returnDetails?null:l.returnDetails.created_by)," "),e.R7$(4),e.Y8G("nzData",l.returnDetails.products)("nzBordered",!0)("nzShowPagination",!1)("nzNoResult",m),e.R7$(4),e.JRh(e.bMT(64,37,"sales.quick_sale.invoice_table.product_name")),e.R7$(3),e.JRh(e.bMT(67,39,"sales.invoice.product_return.form.products.returned_quantity")),e.R7$(3),e.JRh(e.bMT(70,41,"sales.invoice.product_return.form.products.batch_code")),e.R7$(3),e.JRh(e.bMT(73,43,"sales.invoice.product_return.form.products.supplier")),e.R7$(3),e.Y8G("ngForOf",l.returnDetails.products),e.R7$(3),e.Y8G("label","Go Back")}}function j(n,c){if(1&n&&(e.j41(0,"div"),e.DNE(1,k,79,45,"div",7),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",!t.editMode)}}function U(n,c){1&n&&(e.j41(0,"div",26),e.nrm(1,"img",27),e.j41(2,"h2",28),e.EFF(3,"No Data Found"),e.k0s()())}function A(n,c){1&n&&e.nrm(0,"nz-empty",29)}let N=(()=>{class n{constructor(t,s,o,l,m,B){this._httpService=t,this._destroyRef=s,this._notificationService=o,this._activatedRoute=l,this._location=m,this._router=B,this.editMode=!1,this.loading=!1,this.returnReasons=[],this._activatedRoute.paramMap.pipe((0,h.T)(()=>window.history.state)).pipe((0,u.pQ)(this._destroyRef)).subscribe(V=>{this.editMode=V.edit})}ngOnInit(){this.loadProductDetails(),this.returnReasons=R.V.PRODUCT_RETURN_REASONS}goBack(){this._location.back()}handleActions(t){"back"===t.action?this.goBack():console.log("Action not handled:",t.action)}redirectToSale(){this._router.navigate(["/manager/inventory/invoice/invoice-list/view-invoice",this.returnDetails?.sales_oid],{state:{edit:!1}})}redirectToSupplier(t){t?.supplier_oid&&this._router.navigate(["/manager/configuration/supplier/view-supplier",t.supplier_oid],{state:{edit:!1}})}getReturnReasonLabel(t){return this.returnReasons.find(s=>s.value===t)?.label||"Unknown Reason"}loadProductDetails(){this.loading=!0,this._httpService.get(v.A.GET_PRODUCT_RETURN_DETAILS_FOR_MANAGER,{oid:this.oid}).pipe((0,u.pQ)(this._destroyRef),(0,P.j)(()=>this.loading=!1)).subscribe({next:t=>{200===t.status&&(this.returnDetails=t?.body?.data,console.log(this.returnDetails))},error:t=>{console.log(t),this._notificationService.error("Error!",t?.error?.message)}})}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(T.k),e.rXU(e.abz),e.rXU(F.xY),e.rXU(D.nX),e.rXU(i.aZ),e.rXU(D.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["view-product-return-details-for-manager"]],inputs:{oid:"oid"},standalone:!0,features:[e.aNF],decls:8,vars:3,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[3,"isVisible",4,"ngIf"],[4,"ngIf"],["class","flex flex-col items-center justify-center h-full text-center bg-gray-50 p-8 rounded-md space-y-4",4,"ngIf"],["noProducts",""],[3,"isVisible"],["class","space-y-4",4,"ngIf"],[1,"space-y-4"],[3,"nzTitle","nzExtra"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","md:grid-cols-3"],[1,"space-y-1"],[1,"font-semibold","text-secondary"],["salesExtraInfo",""],["salesHeader",""],["nzTitle","Return Information",3,"nzExtra"],["returnExtraInfo",""],[3,"nzData","nzBordered","nzShowPagination","nzNoResult"],[4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4"],[1,"flex","items-center","gap-4"],[3,"label","click"],[1,"font-bold"],[1,"flex","items-center","justify-start","gap-2"],["src","assets/icons/export.svg","alt","Redirect to Sales Invoice",1,"hover:cursor-pointer",3,"click"],[1,"hover:cursor-pointer","hover:underline","hover:underline-offset-2","decoration-blue-500",3,"click"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","bg-gray-50","p-8","rounded-md","space-y-4"],["src","assets/icons/no_data.svg","alt","No Data Found"],[1,"text-lg","font-semibold","text-black"],["nzNotFoundContent","No Data Found"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Product Return Details"),e.k0s(),e.DNE(3,I,1,1,"app-loader",2),e.DNE(4,j,2,1,"div",3),e.DNE(5,U,4,0,"div",4),e.DNE(6,A,1,0,"ng-template",null,5,e.C5r),e.k0s()),2&s&&(e.R7$(3),e.Y8G("ngIf",o.loading),e.R7$(1),e.Y8G("ngIf",!o.loading&&o.returnDetails),e.R7$(1),e.Y8G("ngIf",!o.loading&&!o.returnDetails))},dependencies:[i.MD,i.Sq,i.bT,i.oe,g.V,r.t,p.R,d.Z,M.cK,b.CP,b.SO,b._4,b.IL,b.aj,b.kt,O.RW,f.h,f.D9]})}}return n})()},9475:(E,_,a)=>{a.d(_,{t:()=>g});var i=a(177),r=a(7705);let g=(()=>{class d{constructor(){this.type="button"}static{this.\u0275fac=function(u){return new(u||d)}}static{this.\u0275cmp=r.VBU({type:d,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[r.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(u,v){1&u&&(r.j41(0,"button",0),r.nrm(1,"div",1),r.j41(2,"span",2),r.EFF(3),r.k0s()()),2&u&&(r.R7$(3),r.SpI(" ",v.label," "))},dependencies:[i.MD]})}}return d})()},765:(E,_,a)=>{a.d(_,{V:()=>d});var i=a(177),r=a(7705);function g(p,f){1&p&&(r.j41(0,"div",1),r.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),r.k0s())}let d=(()=>{class p{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(v){return new(v||p)}}static{this.\u0275cmp=r.VBU({type:p,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[r.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(v,R){1&v&&r.DNE(0,g,6,0,"div",0),2&v&&r.Y8G("ngIf",R.isVisible)},dependencies:[i.MD,i.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return p})()}}]);