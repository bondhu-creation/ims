"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[1656],{1656:(M,u,n)=>{n.r(u),n.d(u,{ViewInvoiceDetailsForManagerComponent:()=>B});var l=n(177),o=n(765),m=n(9079),r=n(4774),c=n(980),v=n(7109),_=n(8018),d=n(9475),t=n(7705),D=n(5816),b=n(6504),y=n(6389),I=n(5703),f=n(934),k=n(9397),T=n(1672);function P(a,p){if(1&a&&t.nrm(0,"app-loader",2),2&a){const e=t.XpG();t.Y8G("isVisible",e.loading)}}function O(a,p){if(1&a&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.nI1(12,"currency"),t.k0s()()),2&a){const e=p.$implicit;t.R7$(2),t.JRh(e.product_name),t.R7$(2),t.JRh(e.quantity),t.R7$(2),t.JRh(t.brH(7,5,e.unit_price,"\u09f3","symbol")),t.R7$(3),t.JRh(e.discount),t.R7$(2),t.JRh(t.brH(12,9,e.total,"\u09f3","symbol"))}}function C(a,p){1&a&&(t.nrm(0,"nz-empty",25),t.nI1(1,"translate")),2&a&&t.FS9("nzNotFoundContent",t.bMT(1,1,"sales.quick_sale.invoice_table.no_product_added"))}function j(a,p){if(1&a&&(t.j41(0,"div",17)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p"),t.EFF(5),t.k0s()()),2&a){const e=t.XpG(2);let s;t.R7$(2),t.JRh(t.bMT(3,2,"sales.quick_sale.payment_info.note.label")),t.R7$(3),t.JRh(null!==(s=e.invoiceDetails.note)&&void 0!==s?s:"-")}}function x(a,p){if(1&a&&(t.j41(0,"div",17)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p"),t.EFF(5),t.k0s()()),2&a){const e=t.XpG(2);let s;t.R7$(2),t.SpI("",t.bMT(3,2,"sales.quick_sale.payment_info.payment_reference.label")," "),t.R7$(3),t.JRh(null!==(s=e.invoiceDetails.payment_reference)&&void 0!==s?s:"-")}}function $(a,p){1&a&&(t.j41(0,"h3",26)(1,"span",27),t.EFF(2,"*"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()),2&a&&(t.R7$(3),t.SpI("",t.bMT(4,1,"sales.quick_sale.payment_info.title")," "))}function z(a,p){if(1&a){const e=t.RV6();t.j41(0,"div")(1,"div",3)(2,"div",4)(3,"div",5),t.nrm(4,"i",6),t.j41(5,"h2",7),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"span",8),t.EFF(9),t.k0s()(),t.j41(10,"div",9)(11,"p",10),t.EFF(12),t.nI1(13,"currency"),t.k0s()()(),t.j41(14,"nz-table",11)(15,"thead")(16,"tr")(17,"th"),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"th"),t.EFF(21),t.nI1(22,"translate"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.j41(26,"th"),t.EFF(27),t.nI1(28,"translate"),t.k0s(),t.j41(29,"th"),t.EFF(30),t.nI1(31,"translate"),t.k0s()()(),t.j41(32,"tbody"),t.DNE(33,O,13,13,"tr",12),t.k0s()(),t.DNE(34,C,2,3,"ng-template",null,13,t.C5r),t.j41(36,"div",14)(37,"nz-card",15),t.nI1(38,"translate"),t.j41(39,"div",16)(40,"div",17)(41,"p"),t.EFF(42),t.nI1(43,"translate"),t.k0s(),t.j41(44,"p"),t.EFF(45),t.k0s()(),t.j41(46,"div",17)(47,"p"),t.EFF(48),t.nI1(49,"translate"),t.k0s(),t.j41(50,"p"),t.EFF(51),t.k0s()(),t.j41(52,"div",17)(53,"p"),t.EFF(54),t.nI1(55,"translate"),t.k0s(),t.j41(56,"p"),t.EFF(57),t.k0s()(),t.j41(58,"div",17)(59,"p"),t.EFF(60),t.nI1(61,"translate"),t.k0s(),t.j41(62,"p"),t.EFF(63),t.k0s()(),t.j41(64,"div",17)(65,"p"),t.EFF(66),t.nI1(67,"translate"),t.k0s(),t.j41(68,"p"),t.EFF(69),t.k0s()()()(),t.j41(70,"nz-card",18)(71,"div",16)(72,"div",17)(73,"p"),t.EFF(74),t.nI1(75,"translate"),t.k0s(),t.j41(76,"p"),t.EFF(77),t.nI1(78,"translate"),t.k0s()(),t.DNE(79,j,6,4,"div",19),t.DNE(80,x,6,4,"div",19),t.j41(81,"div",20)(82,"p"),t.EFF(83),t.nI1(84,"translate"),t.k0s(),t.j41(85,"p"),t.EFF(86),t.nI1(87,"translate"),t.k0s()()()(),t.DNE(88,$,5,3,"ng-template",null,21,t.C5r),t.k0s(),t.j41(90,"div",22)(91,"div",23)(92,"secondary-button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.goBack())}),t.k0s()()()()()}if(2&a){const e=t.sdS(35),s=t.sdS(89),i=t.XpG();let h,g,E,R,F;t.R7$(6),t.JRh(t.bMT(7,34,"sales.quick_sale.invoice_title")),t.R7$(3),t.SpI("#",i.invoiceDetails.invoice_no,""),t.R7$(3),t.SpI("Total: ",t.brH(13,36,i.invoiceDetails.total_amount,"\u09f3","symbol")," "),t.R7$(2),t.Y8G("nzData",i.invoiceDetails.products)("nzBordered",!0)("nzShowPagination",!1)("nzSize","small")("nzNoResult",e),t.R7$(4),t.JRh(t.bMT(19,40,"sales.quick_sale.invoice_table.product_name")),t.R7$(3),t.JRh(t.bMT(22,42,"sales.quick_sale.invoice_table.quantity")),t.R7$(3),t.JRh(t.bMT(25,44,"sales.quick_sale.invoice_table.unit_price")),t.R7$(3),t.JRh(t.bMT(28,46,"sales.quick_sale.invoice_table.discount")),t.R7$(3),t.JRh(t.bMT(31,48,"sales.quick_sale.invoice_table.total_price")),t.R7$(3),t.Y8G("ngForOf",i.invoiceDetails.products),t.R7$(4),t.FS9("nzTitle",t.bMT(38,50,"sales.quick_sale.customer_info.title")),t.R7$(5),t.JRh(t.bMT(43,52,"sales.quick_sale.customer_info.customer_name.label")),t.R7$(3),t.JRh(null!==(h=i.invoiceDetails.customer_name)&&void 0!==h?h:"-"),t.R7$(3),t.JRh(t.bMT(49,54,"sales.quick_sale.customer_info.customer_phone.label")),t.R7$(3),t.JRh(null!==(g=i.invoiceDetails.customer_phone)&&void 0!==g?g:"-"),t.R7$(3),t.JRh(t.bMT(55,56,"sales.quick_sale.customer_info.customer_address.label")),t.R7$(3),t.JRh(null!==(E=i.invoiceDetails.customer_address)&&void 0!==E?E:"-"),t.R7$(3),t.JRh(t.bMT(61,58,"sales.quick_sale.customer_info.customer_email.label")),t.R7$(3),t.JRh(null!==(R=i.invoiceDetails.customer_email)&&void 0!==R?R:"-"),t.R7$(3),t.JRh(t.bMT(67,60,"sales.quick_sale.customer_info.customer_address.label")),t.R7$(3),t.JRh(null!==(F=i.invoiceDetails.customer_address)&&void 0!==F?F:"-"),t.R7$(1),t.Y8G("nzTitle",s)("nzBordered",!0),t.R7$(4),t.JRh(t.bMT(75,62,"sales.quick_sale.payment_info.payment_method.label")),t.R7$(3),t.JRh(t.bMT(78,64,i.getPaymentMethod(i.invoiceDetails.payment_method))),t.R7$(2),t.Y8G("ngIf","bkash"!==i.invoiceDetails.payment_method),t.R7$(1),t.Y8G("ngIf","bkash"===i.invoiceDetails.payment_method),t.R7$(3),t.JRh(t.bMT(84,66,"sales.quick_sale.payment_info.payment_status.label")),t.R7$(3),t.JRh(t.bMT(87,68,i.getPaymentStatus(i.invoiceDetails.payment_status))),t.R7$(6),t.Y8G("label","Go Back")}}let B=(()=>{class a{constructor(e,s,i,h){this._httpService=e,this._destroyRef=s,this._notificationService=i,this._location=h,this.loading=!1}ngOnInit(){this.loadInvoiceDetails()}handleActions(e){"back"===e.action?this._location.back():"return"===e.action&&this.saveProductReturn(e.value)}getPaymentMethod(e){switch(e){case"cash":return"sales.quick_sale.payment_info.payment_method.options.cash";case"bank_transfer":return"sales.quick_sale.payment_info.payment_method.options.bkash";default:return"-"}}getPaymentStatus(e){switch(e){case"unpaid":return"sales.quick_sale.payment_info.payment_status.options.unpaid";case"partially_paid":return"sales.quick_sale.payment_info.payment_status.options.partially_paid";case"paid":return"sales.quick_sale.payment_info.payment_status.options.paid";default:return"-"}}goBack(){this._location.back()}loadInvoiceDetails(){this.loading=!0,this._httpService.get(r.A.GET_INVOICE_DETAILS,{oid:this.oid}).pipe((0,m.pQ)(this._destroyRef),(0,c.j)(()=>this.loading=!1)).subscribe({next:e=>{200===e.status&&(this.invoiceDetails=e?.body?.data)},error:e=>{console.log(e),this._notificationService.error("Error!",e?.error?.message)}})}saveProductReturn(e){this.loading=!0,this._httpService.post(r.A.SAVE_PRODUCT_RETURN,e).pipe((0,m.pQ)(this._destroyRef),(0,c.j)(()=>this.loading=!1)).subscribe({next:s=>{200===s.status?(this._notificationService.success("Success!","Product return saved successfully."),this._location.back()):this._notificationService.error("Error!",s?.body?.message)},error:s=>{console.log(s),this._notificationService.error("Error!",s?.error?.message)}})}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(D.k),t.rXU(t.abz),t.rXU(b.xY),t.rXU(l.aZ))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["view-invoice-details-for-manager"]],inputs:{oid:"oid"},standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[3,"isVisible",4,"ngIf"],[4,"ngIf"],[3,"isVisible"],[1,"p-4","space-y-4"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","space-x-2","text-2xl","font-medium","mb-4"],["nz-icon","","nzType","shopping-cart",1,"text-2xl"],[1,"text-2xl","font-bold"],[1,"text-base","text-gray-500"],[1,"flex","items-center","space-x-2"],[1,"text-lg","font-bold"],[3,"nzData","nzBordered","nzShowPagination","nzSize","nzNoResult"],[4,"ngFor","ngForOf"],["noProducts",""],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[3,"nzTitle"],[1,"grid","grid-cols-2","gap-4"],[1,"space-y-1"],[3,"nzTitle","nzBordered"],["class","space-y-1",4,"ngIf"],[1,"col-span-2","space-y-1"],["paymentTitle",""],[1,"flex","justify-end","items-center"],[1,"flex","space-x-2"],[3,"label","click"],[3,"nzNotFoundContent"],[1,"text-lg","font-semibold","flex","gap-2","items-center"],[1,"text-red-500"]],template:function(s,i){1&s&&(t.DNE(0,P,1,1,"app-loader",0),t.DNE(1,z,93,70,"div",1)),2&s&&(t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.invoiceDetails))},dependencies:[l.MD,l.Sq,l.bT,l.oe,_.h,_.D9,v.Z,y.c,I.cK,f.CP,f.SO,f._4,f.IL,f.aj,f.kt,k.Dn,T.RW,o.V,d.t]})}}return a})()},9475:(M,u,n)=>{n.d(u,{t:()=>m});var l=n(177),o=n(7705);let m=(()=>{class r{constructor(){this.type="button"}static{this.\u0275fac=function(_){return new(_||r)}}static{this.\u0275cmp=o.VBU({type:r,selectors:[["secondary-button"]],inputs:{label:"label",type:"type"},standalone:!0,features:[o.aNF],decls:4,vars:1,consts:[["type","button",1,"min-w-min","group","relative","flex","items-center","gap-4","overflow-hidden","rounded-sm","bg-white","px-6","py-2","shadow","font-medium","disabled:cursor-wait"],[1,"absolute","inset-0","w-2","bg-[#8D99AE]","transition-all","duration-300","ease-in-out","group-hover:w-full"],[1,"relative","z-10","whitespace-nowrap","text-black","transition-all","duration-300","group-hover:text-white"]],template:function(_,d){1&_&&(o.j41(0,"button",0),o.nrm(1,"div",1),o.j41(2,"span",2),o.EFF(3),o.k0s()()),2&_&&(o.R7$(3),o.SpI(" ",d.label," "))},dependencies:[l.MD]})}}return r})()},765:(M,u,n)=>{n.d(u,{V:()=>r});var l=n(177),o=n(7705);function m(c,v){1&c&&(o.j41(0,"div",1),o.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),o.k0s())}let r=(()=>{class c{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(d){return new(d||c)}}static{this.\u0275cmp=o.VBU({type:c,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[o.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(d,t){1&d&&o.DNE(0,m,6,0,"div",0),2&d&&o.Y8G("ngIf",t.isVisible)},dependencies:[l.MD,l.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return c})()}}]);