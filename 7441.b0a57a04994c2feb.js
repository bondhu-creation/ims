"use strict";(self.webpackChunkims=self.webpackChunkims||[]).push([[7441],{4958:(_,h,n)=>{n.d(h,{V:()=>d});const d={MEASUREMENT_UNITS:[{label:"Kilogram (kg)",value:"kg"},{label:"Liter (L)",value:"l"},{label:"Piece (pcs)",value:"pcs"},{label:"Meter (m)",value:"m"},{label:"Box (box)",value:"box"},{label:"Pack (pack)",value:"pack"},{label:"Dozen (doz)",value:"doz"},{label:"Gram (g)",value:"g"},{label:"Ton (t)",value:"t"},{label:"Barrel (bbl)",value:"bbl"}],PRODUCT_NATURE:[{label:"For Sale",value:"for_sale"},{label:"For Office Use",value:"for_office_use"},{label:"For Delivery",value:"for_delivery"},{label:"For Packaging",value:"for_packaging"},{label:"For Storage",value:"for_storage"},{label:"For Maintenance",value:"for_maintenance"},{label:"For Personal Use",value:"for_personal_use"},{label:"For Promotion",value:"for_promotion"}],NATURE_OF_ASSET:[{label:"Tangible",value:"tangible"},{label:"Consumable",value:"consumable"},{label:"Fixed Asset",value:"fixed_asset"},{label:"Current Asset",value:"current_asset"},{label:"Intangible Asset",value:"intangible_asset"},{label:"Inventory",value:"inventory"},{label:"Depreciable",value:"depreciable"},{label:"Non-depreciable",value:"non_depreciable"}],SOURCE_TYPES:[{label:"Supplier",value:"supplier"},{label:"Dealer",value:"dealer"}],STORAGE_TYPES:[{label:"Pallet Storage",value:"pallet"},{label:"Shelf Storage",value:"shelf"},{label:"Bin Storage",value:"bin"},{label:"Bulk Storage",value:"bulk"},{label:"Cold Storage",value:"cold"},{label:"Rack Storage",value:"rack"},{label:"Drive-In Rack Storage",value:"drive_in_rack"},{label:"Drawer Storage",value:"drawer"},{label:"Secure Vaults",value:"secure_vaults"}],PURCHASE_TYPES:[{label:"Instant",value:"instant"},{label:"Advance",value:"advance"},{label:"Overseas",value:"overseas"}],PAYMENT_STATUS:[{label:"Paid",value:"paid"},{label:"Partially Paid",value:"partially_paid"},{label:"Unpaid",value:"unpaid"}],INTENDED_USE_OPTIONS:[{label:"For Sale",value:"for_sale"},{label:"For Internal Use",value:"for_internal_use"}],MONTHS:[{label:"January",value:"january"},{label:"February",value:"february"},{label:"March",value:"march"},{label:"April",value:"april"},{label:"May",value:"may"},{label:"June",value:"june"},{label:"July",value:"july"},{label:"August",value:"august"},{label:"September",value:"september"},{label:"October",value:"october"},{label:"November",value:"november"},{label:"December",value:"december"}],PRODUCT_RETURN_REASONS:[{label:"Item is broken or cracked",value:"broken"},{label:"Damaged product (before use)",value:"damaged_before_use"},{label:"Stopped working after short use",value:"damaged_after_use"},{label:"Wrong size or fit",value:"wrong_size"},{label:"Wrong product given",value:"wrong_product"},{label:"Product quality not satisfactory",value:"poor_quality"},{label:"Customer didn\u2019t like the product",value:"not_liked"},{label:"Product differs from description",value:"not_as_expected"},{label:"Duplicate item purchased",value:"duplicate_purchase"},{label:"Item was part of an exchange",value:"exchange"},{label:"Other (please specify)",value:"other"}],DISPOSAL_REASONS:[{label:"Expired",value:"expired"},{label:"Damaged in store",value:"damaged"},{label:"Customer Return - Unsellable",value:"customer_unsellable"},{label:"Opened Packaging",value:"opened"},{label:"Others",value:"others"}]}},9822:(_,h,n)=>{n.r(h),n.d(h,{PurchaseOrderListComponent:()=>G});var d=n(177),r=n(9417),m=n(5623),f=n(7109),u=n(9079),b=n(4774),c=n(3887),g=n(980),e=n(7705),S=n(765),E=n(4958),x=n(3769),z=n(6505),y=n(3146);function T(i,s){if(1&i&&e.nrm(0,"app-loader",2),2&i){const t=e.XpG();e.Y8G("isVisible",t.loading)}}function O(i,s){if(1&i){const t=e.RV6();e.qSk(),e.joV(),e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const l=e.XpG().$implicit,o=e.XpG(3);return e.Njj(o.handleAction("edit",l))}),e.qSk(),e.j41(1,"svg",23),e.nrm(2,"path",27),e.k0s()()}}function j(i,s){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"nz-ribbon",12)(2,"li",13)(3,"div",14)(4,"p",15),e.EFF(5,"Total Amount: "),e.j41(6,"span",16),e.EFF(7),e.k0s()(),e.j41(8,"p",17),e.EFF(9,"Total Product: "),e.j41(10,"span",16),e.EFF(11),e.k0s()(),e.j41(12,"p",17),e.EFF(13,"Purchase Type: "),e.j41(14,"span",16),e.EFF(15),e.k0s()()(),e.j41(16,"div")(17,"p",18),e.EFF(18,"Supplier Name: "),e.j41(19,"span",16),e.EFF(20),e.k0s()(),e.j41(21,"p",18),e.EFF(22,"Date of Purchase: "),e.j41(23,"span",16),e.EFF(24),e.k0s()()(),e.j41(25,"div",19)(26,"div",20)(27,"div",21)(28,"button",22),e.bIt("click",function(){const o=e.eBV(t).$implicit,p=e.XpG(3);return e.Njj(p.handleAction("view",o))}),e.qSk(),e.j41(29,"svg",23),e.nrm(30,"path",24)(31,"path",25),e.k0s()(),e.DNE(32,O,3,0,"button",26),e.k0s()()()()(),e.bVm()}if(2&i){const t=s.$implicit,a=e.XpG(3);e.R7$(1),e.Y8G("nzText",t.status)("nzColor",a.getRibbonColor(t)),e.R7$(6),e.JRh(null==t?null:t.total_amount),e.R7$(4),e.JRh(null==t?null:t.product_count),e.R7$(4),e.JRh(a.getPurchaseType(null==t?null:t.purchase_type)),e.R7$(5),e.JRh(null==t?null:t.supplier_name),e.R7$(4),e.JRh(null==t?null:t.created_on),e.R7$(8),e.Y8G("ngIf",a.getEditButtonStatus(t))}}function I(i,s){if(1&i&&(e.j41(0,"ul",10),e.DNE(1,j,33,8,"ng-container",11),e.k0s()),2&i){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.data)}}function F(i,s){1&i&&(e.j41(0,"div",28),e.nrm(1,"img",29),e.j41(2,"h2",30),e.EFF(3,"No Data Found"),e.k0s(),e.j41(4,"p",31),e.EFF(5,"Try refining your search or adding new data."),e.k0s()())}function k(i,s){if(1&i&&e.EFF(0),2&i){const t=s.range;e.E5c(" ",t[0]," - ",t[1]," of ",s.$implicit," items ")}}function R(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",3),e.DNE(1,I,2,1,"ul",4),e.DNE(2,F,6,0,"div",5),e.j41(3,"div",6)(4,"div",7)(5,"nz-pagination",8),e.bIt("nzPageIndexChange",function(l){e.eBV(t);const o=e.XpG();return e.Njj(o.currentIndex=l)})("nzPageSizeChange",function(l){e.eBV(t);const o=e.XpG();return e.Njj(o.pageSize=l)})("nzPageIndexChange",function(l){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageIndexChange(l))})("nzPageSizeChange",function(l){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageSizeChange(l))}),e.k0s(),e.DNE(6,k,1,3,"ng-template",null,9,e.C5r),e.k0s()()()}if(2&i){const t=e.sdS(7),a=e.XpG();e.R7$(1),e.Y8G("ngIf",a.data.length),e.R7$(1),e.Y8G("ngIf",!a.data.length),e.R7$(3),e.Y8G("nzPageIndex",a.currentIndex)("nzPageSize",a.pageSize)("nzShowSizeChanger",!0)("nzShowTotal",t)("nzTotal",a.totalCount)}}let V=(()=>{class i{constructor(t){this._authService=t,this.data=[],this.actionEmitter=new e.bkB,this.paginationEvent=new e.bkB,this.loading=!1,this.totalCount=0,this.purchaseTypes=E.V.PURCHASE_TYPES,this.currentIndex=1,this.offset=0,this.pageSize=c.YM.PAGE_SIZE,this.user_id=this._authService._userInfo()?.email}onPageIndexChange(t){this.currentIndex=t,this.offset=(t-1)*this.pageSize,this.paginationEvent.emit({offset:this.offset,limit:this.pageSize})}onPageSizeChange(t){this.pageSize=t,this.currentIndex=1,this.offset=0,this.paginationEvent.emit({offset:this.offset,limit:this.pageSize})}handleAction(t,a){this.actionEmitter.emit({action:t,value:a})}getPurchaseType(t){return this.purchaseTypes.find(a=>a.value===t)?.label}getRibbonColor(t){return"Submitted"===t.status?"purple":"Verified"===t.status?"green":"Cancelled"===t.status?"pink":"Rejected"===t.status?"red":void 0}getEditButtonStatus(t){return"Submitted"===t.status&&this.user_id===t.created_by}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(x.u))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-view-purchase-order-list"]],inputs:{data:"data",loading:"loading",totalCount:"totalCount"},outputs:{actionEmitter:"actionEmitter",paginationEvent:"paginationEvent"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[[3,"isVisible",4,"ngIf"],["class","p-4 border rounded-md",4,"ngIf"],[3,"isVisible"],[1,"p-4","border","rounded-md"],["class","divide-y divide-gray-100 space-y-4",4,"ngIf"],["class","flex flex-col items-center justify-center h-full text-center bg-gray-50 p-8 rounded-md space-y-4",4,"ngIf"],[1,"bg-white","grid","grid-cols-1","h-16"],[1,"flex","items-center","justify-end","mr-6"],[3,"nzPageIndex","nzPageSize","nzShowSizeChanger","nzShowTotal","nzTotal","nzPageIndexChange","nzPageSizeChange"],["rangeTemplate",""],[1,"divide-y","divide-gray-100","space-y-4"],[4,"ngFor","ngForOf"],[3,"nzText","nzColor"],[1,"grid","md:grid-cols-3","gap-x-6","py-5","shadow-sm","border","p-4","rounded-md"],[1,"min-w-0","flex-auto"],[1,"text-sm/6","text-[#180B26]","font-semibold"],[1,"font-normal"],[1,"mt-1","truncate","text-xs/5","text-[#180B26]","font-semibold"],[1,"mt-1","truncate","text-xs/5","text-gray-500","font-semibold"],[1,"flex","justify-end"],[1,"shrink-0","sm:flex","sm:flex-col","sm:items-center"],[1,"mt-1","text-xs/5","text-black","flex","justify-center","items-center","gap-4","h-full"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],[3,"click",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","bg-gray-50","p-8","rounded-md","space-y-4"],["src","assets/icons/no_data.svg","alt","No Data Found"],[1,"text-lg","font-semibold","text-black"],[1,"text-black"]],template:function(a,l){1&a&&(e.DNE(0,T,1,1,"app-loader",0),e.DNE(1,R,8,7,"div",1)),2&a&&(e.Y8G("ngIf",l.loading),e.R7$(1),e.Y8G("ngIf",!l.loading))},dependencies:[d.MD,d.Sq,d.bT,f.Z,z.ae,y.KI,S.V]})}}return i})();var L=n(5816),w=n(6504),C=n(4710),A=n(6389),N=n(9448),v=n(1011),P=n(1997),D=n(9397);function M(i,s){1&i&&e.nrm(0,"span",14)}let G=(()=>{class i{constructor(t,a,l,o,p){this._httpService=t,this._destroyRef=a,this._notificationService=l,this._router=o,this._activatedRoute=p,this.data=[],this.totalCount=0,this.loading=!1,this.payload={offset:0,limit:c.YM.PAGE_SIZE,search_text:"",status:""},this.isFilter=!1,this.searchControl=new r.MJ(""),this.selectControl=new r.MJ(""),this.options=[{value:"paid",label:"Paid"},{value:"unpaid",label:"Unpaid"},{value:"partially_paid",label:"Partially Paid"}]}ngOnInit(){this.loadList(),this.searchControl.valueChanges.subscribe(t=>{this.onSearchChange(t)}),this.selectControl.valueChanges.subscribe(t=>{this.onSelectChange(t)})}onSearchChange(t){this.payload={offset:0,limit:c.YM.PAGE_SIZE,search_text:t,status:""},this.isFilter=!0,this.loadList()}onSelectChange(t){this.payload=t?{...this.payload,offset:0,limit:c.YM.PAGE_SIZE,status:t}:{...this.payload,offset:0,limit:c.YM.PAGE_SIZE,status:""},this.isFilter=!0,this.loadList()}handlePaginationEvent(t){this.payload={...this.payload,offset:t.offset,limit:t.limit},this.loadList()}loadList(){this.isFilter||(this.loading=!0),this._httpService.get(b.A.GET_PURCHASE_LIST,this.payload).pipe((0,u.pQ)(this._destroyRef),(0,g.j)(()=>this.loading=!1)).subscribe({next:t=>{200===t.status&&(this.data=[],t.body?.data?.length?(this.data=t.body.data,this.totalCount=t.body.total):this.data=[])},error:t=>{console.log(t),this._notificationService.error("Error!",t?.error?.message)}})}handleListActions(t){"create"===t.action?this.handleAdd():"view"===t.action?this.handleView(t.value.oid):"edit"===t.action&&this.handleEdit(t.value.oid)}handleAdd(){this._router.navigate(["../create-purchase-order"],{relativeTo:this._activatedRoute})}handleView(t){this._router.navigate([`../view-purchase-order/${t}`],{relativeTo:this._activatedRoute,state:{edit:!1}})}handleEdit(t){this._router.navigate([`../view-purchase-order/${t}`],{relativeTo:this._activatedRoute,state:{edit:!0}})}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(L.k),e.rXU(e.abz),e.rXU(w.xY),e.rXU(C.Ix),e.rXU(C.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-purchase-order-list"]],standalone:!0,features:[e.aNF],decls:18,vars:7,consts:[[1,"p-4","space-y-3"],[1,"text-2xl","font-medium","mb-4","animate-text"],[1,"md:flex","justify-between","items-center"],[1,"md:w-2/3","grid","lg:grid-cols-3","gap-4"],["nz-input","","nzAllowClear","","nzPlaceHolder","Select Order Status",1,"w-full",3,"formControl"],["nzLabel","Submitted","nzValue","Submitted"],["nzLabel","Verified","nzValue","Verified"],["nzLabel","Cancelled","nzValue","Cancelled"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Enter Search Text Here",3,"formControl"],["suffixIconSearch",""],[1,"flex","justify-end","md:justify-center","items-center","gap-4","mt-4","md:mt-0"],[3,"label","click"],[3,"loading","data","totalCount","actionEmitter","paginationEvent"],["nzType","search","nz-icon",""]],template:function(a,l){if(1&a&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Purchase Order List"),e.k0s(),e.j41(3,"div")(4,"div",2)(5,"div",3)(6,"nz-select",4),e.nrm(7,"nz-option",5)(8,"nz-option",6)(9,"nz-option",7),e.k0s(),e.j41(10,"nz-input-group",8),e.nrm(11,"input",9),e.k0s(),e.DNE(12,M,1,0,"ng-template",null,10,e.C5r),e.k0s(),e.j41(14,"div",11)(15,"primary-button-with-plus-icon",12),e.bIt("click",function(){return l.handleAdd()}),e.k0s()()(),e.nrm(16,"nz-divider"),e.j41(17,"app-view-purchase-order-list",13),e.bIt("actionEmitter",function(p){return l.handleListActions(p)})("paginationEvent",function(p){return l.handlePaginationEvent(p)}),e.k0s()()()),2&a){const o=e.sdS(13);e.R7$(6),e.Y8G("formControl",l.selectControl),e.R7$(4),e.Y8G("nzSuffix",o),e.R7$(1),e.Y8G("formControl",l.searchControl),e.R7$(4),e.Y8G("label","Add Purchase"),e.R7$(2),e.Y8G("loading",l.loading)("data",l.data)("totalCount",l.totalCount)}},dependencies:[d.MD,f.Z,A.c,N.j,v.Sy,v.tg,v.vN,P.ld,P.WI,D.Dn,r.X1,r.me,r.BC,r.l_,V,m.C]})}}return i})()},765:(_,h,n)=>{n.d(h,{V:()=>f});var d=n(177),r=n(7705);function m(u,b){1&u&&(r.j41(0,"div",1),r.nrm(1,"span")(2,"span")(3,"span")(4,"span")(5,"span"),r.k0s())}let f=(()=>{class u{constructor(){this.isVisible=!1,this.showLoader=!1}ngOnInit(){this.isVisible&&(this.showLoader=!0,setTimeout(()=>{this.showLoader=!1},500))}static{this.\u0275fac=function(g){return new(g||u)}}static{this.\u0275cmp=r.VBU({type:u,selectors:[["app-loader"]],inputs:{isVisible:"isVisible"},standalone:!0,features:[r.aNF],decls:1,vars:1,consts:[["class","loading",4,"ngIf"],[1,"loading"]],template:function(g,e){1&g&&r.DNE(0,m,6,0,"div",0),2&g&&r.Y8G("ngIf",e.isVisible)},dependencies:[d.MD,d.bT],styles:[".loading[_ngcontent-%COMP%]{--speed-of-animation: .9s;--gap: 6px;--first-color: #4c86f9;--second-color: #49a84c;--third-color: #f6bb02;--fourth-color: #f6bb02;--fifth-color: #2196f3;display:flex;justify-content:center;align-items:center;gap:6px}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:4px;height:50px;background:var(--first-color);animation:_ngcontent-%COMP%_scale var(--speed-of-animation) ease-in-out infinite}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){background:var(--second-color);animation-delay:-.8s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){background:var(--third-color);animation-delay:-.7s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){background:var(--fourth-color);animation-delay:-.6s}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){background:var(--fifth-color);animation-delay:-.5s}@keyframes _ngcontent-%COMP%_scale{0%,40%,to{transform:scaleY(.05)}20%{transform:scaleY(1)}}"]})}}return u})()}}]);